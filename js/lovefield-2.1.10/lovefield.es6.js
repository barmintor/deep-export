if(!self.window){window=self;}
(function(){'use strict';function aa(){return function(){}}function ca(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,da=this;function n(a){return void 0!==a}function ea(){}function fa(){throw Error("unimplemented abstract method");}
function ga(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ha(a){return null!=a}function ia(a){var b=ga(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ja(a){return"string"==typeof a}function ka(a){return"function"==ga(a)}function la(a){return a[ma]||(a[ma]=++na)}var ma="closure_uid_"+(1E9*Math.random()>>>0),na=0;function oa(a,b,c){return a.call.apply(a.bind,arguments)}
function pa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function qa(a,b,c){qa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oa:pa;return qa.apply(null,arguments)}
function sa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function q(a,b){a=a.split(".");var c=da;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&n(b)?c[d]=b:c=c[d]?c[d]:c[d]={}}
function r(a,b){function c(){}c.prototype=b.prototype;a.gb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Rg=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};function ta(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ta);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}r(ta,Error);ta.prototype.name="CustomError";var ua=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.mg=c;this.Kf=a;this.Fg=b;this.md=0;this.cd=null}wa.prototype.get=function(){var a;0<this.md?(this.md--,a=this.cd,this.cd=a.next,a.next=null):a=this.Kf();return a};wa.prototype.put=function(a){this.Fg(a);this.md<this.mg&&(this.md++,a.next=this.cd,this.cd=a)};var xa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ja(a))return ja(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ja(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ja(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Aa=Array.prototype.reduce?function(a,b,c,d){d&&(b=qa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ya(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ba=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ja(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Ca(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Da(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ea(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ga(d))for(var e=0;e<d.length;e+=8192)for(var f=Ea.apply(null,Ca(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};var Fa;a:{var Ga=da.navigator;if(Ga){var Ha=Ga.userAgent;if(Ha){Fa=Ha;break a}}Fa=""}function t(a){return-1!=Fa.indexOf(a)};function Ia(){return t("Safari")&&!(Ja()||t("Coast")||t("Opera")||t("Edge")||t("Silk")||t("Android"))}function Ja(){return(t("Chrome")||t("CriOS"))&&!t("Edge")};function Ka(a){da.setTimeout(function(){throw a;},0)}var Ma;
function Na(){var a=da.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!t("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=qa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!t("Trident")&&!t("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(n(c.next)){c=c.next;var a=c.Ae;c.Ae=null;a()}};return function(a){d.next={Ae:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){da.setTimeout(a,0)}};function Oa(){this.wd=this.nc=null}var Qa=new wa(function(){return new Pa},function(a){a.reset()},100);Oa.prototype.add=function(a,b){var c=Qa.get();c.set(a,b);this.wd?this.wd.next=c:this.nc=c;this.wd=c};Oa.prototype.remove=function(){var a=null;this.nc&&(a=this.nc,this.nc=this.nc.next,this.nc||(this.wd=null),a.next=null);return a};function Pa(){this.next=this.scope=this.Od=null}Pa.prototype.set=function(a,b){this.Od=a;this.scope=b;this.next=null};
Pa.prototype.reset=function(){this.next=this.scope=this.Od=null};function Ra(a,b){Sa||Ta();Ua||(Sa(),Ua=!0);Va.add(a,b)}var Sa;function Ta(){var a=da.Promise;if(-1!=String(a).indexOf("[native code]")){var b=a.resolve(void 0);Sa=function(){b.then(Wa)}}else Sa=function(){var a=Wa;!ka(da.setImmediate)||da.Window&&da.Window.prototype&&!t("Edge")&&da.Window.prototype.setImmediate==da.setImmediate?(Ma||(Ma=Na()),Ma(a)):da.setImmediate(a)}}var Ua=!1,Va=new Oa;function Wa(){for(var a;a=Va.remove();){try{a.Od.call(a.scope)}catch(b){Ka(b)}Qa.put(a)}Ua=!1};function u(a,b){this.Ra=0;this.gf=void 0;this.Tc=this.bc=this.C=null;this.bd=this.Md=!1;if(a!=ea)try{var c=this;a.call(b,function(a){Xa(c,2,a)},function(a){Xa(c,3,a)})}catch(d){Xa(this,3,d)}}function Ya(){this.next=this.context=this.hc=this.Fc=this.child=null;this.zd=!1}Ya.prototype.reset=function(){this.context=this.hc=this.Fc=this.child=null;this.zd=!1};var Za=new wa(function(){return new Ya},function(a){a.reset()},100);function $a(a,b,c){var d=Za.get();d.Fc=a;d.hc=b;d.context=c;return d}
function v(a){if(a instanceof u)return a;var b=new u(ea);Xa(b,2,a);return b}function ab(a){return new u(function(b,c){c(a)})}function bb(a,b,c){cb(a,b,c,null)||Ra(sa(b,a))}function db(a){return new u(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,p;k<a.length;k++)p=a[k],bb(p,sa(f,k),h);else b(e)})}function w(){var a,b,c=new u(function(c,e){a=c;b=e});return new eb(c,a,b)}
u.prototype.then=function(a,b,c){return fb(this,ka(a)?a:null,ka(b)?b:null,c)};u.prototype.then=u.prototype.then;u.prototype.$goog_Thenable=!0;u.prototype.pe=function(a,b){return fb(this,null,a,b)};function gb(a,b){a.bc||2!=a.Ra&&3!=a.Ra||hb(a);a.Tc?a.Tc.next=b:a.bc=b;a.Tc=b}
function fb(a,b,c,d){var e=$a(null,null,null);e.child=new u(function(a,h){e.Fc=b?function(c){try{var e=b.call(d,c);a(e)}catch(K){h(K)}}:a;e.hc=c?function(b){try{var e=c.call(d,b);!n(e)&&b instanceof ib?h(b):a(e)}catch(K){h(K)}}:h});e.child.C=a;gb(a,e);return e.child}u.prototype.Mg=function(a){this.Ra=0;Xa(this,2,a)};u.prototype.Ng=function(a){this.Ra=0;Xa(this,3,a)};
function Xa(a,b,c){0==a.Ra&&(a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ra=1,cb(c,a.Mg,a.Ng,a)||(a.gf=c,a.Ra=b,a.C=null,hb(a),3!=b||c instanceof ib||jb(a,c)))}function cb(a,b,c,d){if(a instanceof u)return gb(a,$a(b||ea,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ka(f))return kb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function kb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(p){f(p)}}function hb(a){a.Md||(a.Md=!0,Ra(a.Rf,a))}function lb(a){var b=null;a.bc&&(b=a.bc,a.bc=b.next,b.next=null);a.bc||(a.Tc=null);return b}
u.prototype.Rf=function(){for(var a;a=lb(this);){var b=this.Ra,c=this.gf;if(3==b&&a.hc&&!a.zd){var d;for(d=this;d&&d.bd;d=d.C)d.bd=!1}if(a.child)a.child.C=null,mb(a,b,c);else try{a.zd?a.Fc.call(a.context):mb(a,b,c)}catch(e){nb.call(null,e)}Za.put(a)}this.Md=!1};function mb(a,b,c){2==b?a.Fc.call(a.context,c):a.hc&&a.hc.call(a.context,c)}function jb(a,b){a.bd=!0;Ra(function(){a.bd&&nb.call(null,b)})}var nb=Ka;function ib(a){ta.call(this,a)}r(ib,ta);ib.prototype.name="cancel";
function eb(a,b,c){this.ha=a;this.resolve=b;this.reject=c};function ob(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var p=0;p<f+1;p++)h[0][p]=0;for(k=1;k<=e;k++)for(p=1;p<=f;p++)c(a[k-1],b[p-1])?h[k][p]=h[k-1][p-1]+1:h[k][p]=Math.max(h[k-1][p],h[k][p-1]);for(var K=[],k=e,p=f;0<k&&0<p;)c(a[k-1],b[p-1])?(K.unshift(d(k-1,p-1)),k--,p--):h[k-1][p]>h[k][p-1]?k--:p--;return K}function pb(a){return Aa(arguments,function(a,c){return a+c},0)}
function qb(a){return pb.apply(null,arguments)/arguments.length}function rb(a){var b=arguments.length;if(2>b)return 0;var c=qb.apply(null,arguments);return pb.apply(null,za(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function sb(a){return Math.sqrt(rb.apply(null,arguments))};var tb="StopIteration"in da?da.StopIteration:{message:"StopIteration",stack:""};function ub(){}ub.prototype.next=function(){throw tb;};ub.prototype.te=function(){return this};function vb(a){if(a instanceof ub)return a;if("function"==typeof a.te)return a.te(!1);if(ia(a)){var b=0,c=new ub;c.next=function(){for(;;){if(b>=a.length)throw tb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function wb(a,b){if(ia(a))try{ya(a,b,void 0)}catch(c){if(c!==tb)throw c;}else{a=vb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==tb)throw c;}}}function xb(a){if(Ba(arguments,function(a){return!a.length})||!arguments.length)return new ub;var b=new ub,c=arguments,d=Da(c.length);b.next=function(){if(d){for(var a=za(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw tb;};return b};function Ab(a){Bb(a);return a.a.concat()}function Bb(a){if(a.Gf!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Cb(a.$,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.Gf!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],Cb(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}function Cb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Db(a,b){var c=Eb;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)};var Fb=t("Opera"),Gb=t("Trident")||t("MSIE"),Hb=t("Edge"),Ib=t("Gecko")&&!(-1!=Fa.toLowerCase().indexOf("webkit")&&!t("Edge"))&&!(t("Trident")||t("MSIE"))&&!t("Edge"),Jb=-1!=Fa.toLowerCase().indexOf("webkit")&&!t("Edge"),Kb;
a:{var Lb="",Mb=function(){var a=Fa;if(Ib)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Hb)return/Edge\/([\d\.]+)/.exec(a);if(Gb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Jb)return/WebKit\/(\S+)/.exec(a);if(Fb)return/(?:Version)[ \/]?(\S+)/.exec(a)}();Mb&&(Lb=Mb?Mb[1]:"");if(Gb){var Nb,Ob=da.document;Nb=Ob?Ob.documentMode:void 0;if(null!=Nb&&Nb>parseFloat(Lb)){Kb=String(Nb);break a}}Kb=Lb}var Pb=Kb,Eb={};
function Qb(a){return Db(a,function(){for(var b=0,c=ua(String(Pb)).split("."),d=ua(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",k=d[f]||"";do{h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];k=/(\d*)(\D*)(.*)/.exec(k)||["","","",""];if(0==h[0].length&&0==k[0].length)break;b=va(0==h[1].length?0:parseInt(h[1],10),0==k[1].length?0:parseInt(k[1],10))||va(0==h[2].length,0==k[2].length)||va(h[2],k[2]);h=h[3];k=k[3]}while(0==b)}return 0<=b})};var Rb=t("iPhone")&&!t("iPod")&&!t("iPad")||t("iPod"),Sb=t("iPad");/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Tb(){this.Gg=Ia()||Sb||Rb;this.bg=!(this.Gg||Gb&&!Qb(10));!Gb||Qb(11);this.Qg=Ja()||Ia()}var Ub;function x(){return new window.Map}function Vb(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function y(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Wb(a,b){this.ra=a;this.l=b||this.Fe()}var Xb=0;m=Wb.prototype;m.id=g("ra");m.Fe=function(){return{}};m.qf=g("l");m.Ia=function(){return{id:this.ra,value:this.qf()}};m.mb=function(a){return"#"==a.substr(-1)?this.ra:null};function Yb(a){return new Wb(a.id,a.value)}function Zb(a){return new Wb(Xb++,a||{})}function $b(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var ac={};q("lf.TransactionType",ac);ac.READ_ONLY=0;ac.READ_WRITE=1;function z(a,b,c,d,e){this.rd=a;this.fg=b;this.Pg=c;this.Mf=d;this.Df=e}q("lf.TransactionStats",z);z.prototype.Kg=g("rd");z.prototype.success=z.prototype.Kg;z.prototype.eg=g("fg");z.prototype.insertedRowCount=z.prototype.eg;z.prototype.Og=g("Pg");z.prototype.updatedRowCount=z.prototype.Og;z.prototype.Lf=g("Mf");z.prototype.deletedRowCount=z.prototype.Lf;z.prototype.Cf=g("Df");z.prototype.changedTableCount=z.prototype.Cf;function bc(a,b){this.td=a;this.Pa=b||null;this.O=w();this.rd=!1;this.ya=null}m=bc.prototype;m.G=fa;m.cc=fa;m.ka=function(){return(0==this.td?this.cc():cc(this)).then(function(a){this.rd=!0;return a}.bind(this))};function cc(a){try{dc(a.Pa)}catch(b){return ab(b)}return ec(a).then(function(a){this.Pa.ka();return a}.bind(a))}function ec(a){fc(a);gc(a);return a.cc()}
function fc(a){a.Pa.hb.forEach(function(a,c){c=this.Pa.ca().get(c);c=this.G(c.getName(),c.$a.bind(c),0);var b=y(a.wa).map(function(a){return a.id()});0<b.length&&c.remove(b).pe(this.Ne,this);a=y(a.la).map(function(a){return a[1]}).concat(y(a.va));c.put(a).pe(this.Ne,this)},a)}function gc(a){hc(a.Pa).forEach(function(a){var b=this.G(a.getName(),Yb,1);b.remove([]);b.put(a.Ia())},a)}m.Ne=function(a){this.O.reject(a)};
m.X=function(){if(null===this.ya)if(this.rd)if(0==this.td)this.ya=new z(!0,0,0,0,0);else{var a=0,b=0,c=0,d=0;this.Pa.hb.forEach(function(e){d++;a+=e.va.size;c+=e.la.size;b+=e.wa.size});this.ya=new z(!0,a,c,b,d)}else this.ya=new z(!1,0,0,0,0);return this.ya};function ic(a){this.Hg=a}ic.prototype.toString=g("Hg");var jc=new ic("backstore"),kc=new ic("cache"),lc=new ic("indexstore"),mc=new ic("engine"),nc=new ic("runner"),oc=new ic("observerregistry"),A=new ic("schema");function B(a){return n(a)?new window.Set(a):new window.Set}function C(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function pc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function qc(a,b){this.ra=a;this.l=b||{}}function rc(a){var b=B();a.forEach(function(a){b.add(a>>9)});return C(b)}qc.prototype.V=g("ra");function sc(a,b){b.forEach(function(a){this.l[a.id()]=a.Ia()},a)}function tc(a,b){b.forEach(function(a){delete this.l[a]},a)}qc.prototype.Ia=function(){return{id:this.ra,value:JSON.stringify(this.l)}};function uc(a){return new qc(a.id,JSON.parse(a.value))};function vc(a,b,c){this.Y=a;this.Gb=b;this.hf=c}m=vc.prototype;m.get=function(a){if(0==a.length)return this.Qd();var b=this.Gb;return wc(this,a).then(function(c){return a.map(function(a){var d=c.get(a>>9);return b(d.l[a])})})};function wc(a,b){var c=x(),d=w();a=rc(b).map(function(a){return new u(function(b,d){var e;try{e=this.Y.get(a)}catch(p){d(p);return}e.onerror=d;e.onsuccess=function(a){a=uc(a.target.result);c.set(a.V(),a);b()}},this)},a);db(a).then(function(){d.resolve(c)});return d.ha}
m.Qd=function(){return new u(function(a,b){var c=[],d;try{d=this.Y.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f=uc(b.value).l,h;for(h in f)c.push(this.Gb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Rb=function(a){return new u(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return v();var b=x();a.forEach(function(a){var c=a.id()>>9,e=b.get(c)||null;null===e&&(e=this.hf(this.Y.name,c));sc(e,[a]);b.set(c,e)},this);a=y(b).map(function(a){return this.Rb(function(){return this.Y.put(a.Ia())}.bind(this))},this);return db(a)};
m.remove=function(a){if(0==a.length)return this.Rb(function(){return this.Y.clear()}.bind(this));var b=x();a.forEach(function(a){var c=a>>9,e=b.get(c)||null;null===e&&(e=this.hf(this.Y.name,c));tc(e,[a]);b.set(c,e)},this);a=y(b).map(function(a){return this.Rb(function(){return 0==Object.keys(a.l).length?this.Y.delete(a.V()):this.Y.put(a.Ia())}.bind(this))},this);return db(a)};function xc(a,b,c){a=a.b(kc);var d=[c<<9,(c+1<<9)-1];b=a.Sa(b,d[0],d[1]);c=new qc(c);sc(c,b);return c}
function yc(a,b){return new qc(b)};function zc(a){this.U=a.b(kc);this.B=a.b(lc);this.g=a.b(A)}zc.prototype.update=function(a){a.forEach(function(a){Ac(this,a);Bc(this,a)},this)};function Bc(a,b){var c=b.getName();b.wa.forEach(function(a,b){this.U.remove(c,b)},a);b.va.forEach(function(a){this.U.set(c,a)},a);b.la.forEach(function(a){this.U.set(c,a[1])},a)}function Ac(a,b){var c=a.g.table(b.getName());Cc(b).forEach(function(a){Dc(this,c,a)},a)}
function Dc(a,b,c){var d=a.B.kc.get(b.getName())||[],e=0;d.forEach(function(a){try{Ec(a,c),e++}catch(h){throw d.slice(0,e).forEach(function(a){Ec(a,[c[1],c[0]])},this),h;}},a)}function Ec(a,b){var c=null===b[1]?void 0:b[1].mb(a.getName()),d=null===b[0]?void 0:b[0].mb(a.getName());if(!n(d)&&n(c))a.add(c,b[1].id());else if(n(d)&&n(c)){if(null===c||null===d){if(c==d)return}else if(0==a.ib().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else n(d)&&!n(c)&&a.remove(d,b[0].id())};var Fc={};q("lf.ConstraintAction",Fc);Fc.RESTRICT=0;Fc.CASCADE=1;var Gc={};q("lf.ConstraintTiming",Gc);Gc.IMMEDIATE=0;Gc.DEFERRABLE=1;var Hc={};q("lf.Order",Hc);Hc.DESC=0;Hc.ASC=1;var Ic={};q("lf.Type",Ic);Ic.ARRAY_BUFFER=0;Ic.BOOLEAN=1;Ic.DATE_TIME=2;Ic.INTEGER=3;Ic.NUMBER=4;Ic.STRING=5;Ic.OBJECT=6;var Jc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};q("lf.type.DEFAULT_VALUES",Jc);function D(a,b){this.code=a;this.message="http://google.github.io/lovefield/error_lookup/src/error_lookup.html?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(String(arguments[c]).slice(0,64))}r(D,Error);function Kc(){this.$=x();this.size=0}m=Kc.prototype;m.has=function(a){return this.$.has(a)};m.set=function(a,b){var c=this.$.get(a)||null;null===c&&(c=B(),this.$.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Ub=function(a,b){var c=this.$.get(a)||null;null===c&&(c=B(),this.$.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.Wd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Ub(b,c)},this);return this};
m.delete=function(a,b){var c=this.$.get(a)||null;if(null===c)return!1;if(b=c.delete(b))--this.size,0==c.size&&this.$.delete(a);return b};m.get=function(a){a=this.$.get(a)||null;return null===a?null:C(a)};m.clear=function(){this.$.clear();this.size=0};m.keys=function(){return Vb(this.$)};m.values=function(){var a=[];this.$.forEach(function(b){a.push.apply(a,C(b))});return a};function Lc(a){this.B=a.b(lc);this.g=a.b(A);this.U=a.b(kc);this.Yc=null}function Mc(a,b,c){var d=b.xb().sg;c.forEach(function(a){d.forEach(function(b){if(null==a.l[b.getName()])throw new D(202,b.j());},this)},a)}function Nc(a,b,c,d){b.xb().Pd.forEach(function(a){a.timing==d&&Oc(this,a,c)},a)}function Oc(a,b,c){var d=Qc(a,b);c.forEach(function(a){if(Rc(a[0],a[1],b.name)&&(a=a[1].mb(b.name),null!==a&&!d.jb(a)))throw new D(203,b.name);},a)}
function Qc(a,b){null===a.Yc&&(a.Yc=x());var c=a.Yc.get(b.name)||null;null===c&&(c=a.g.table(b.Ua)[b.Gc].Ba(),c=a.B.get(c.j()),a.Yc.set(b.name,c));return c}function Rc(a,b,c){return(null===a?null!==b:null===b)||a.mb(c)!=b.mb(c)}function Sc(a,b,c,d){b=Tc(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&Uc(a,b,c,function(a,b,c){if(b.jb(c))throw new D(203,a.name);}))}
function Vc(a,b,c){b=Tc(a.g.info(),b.getName(),1);if(null===b)return null;var d=new Kc;Uc(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Ub(a.Be,b)});return d}function Wc(a,b,c){var d=new Kc;Uc(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Nd:a,xg:k[1]})})});return d}function Uc(a,b,c,d){b.forEach(function(a){var b=this.B.get(a.name),e=Qc(this,a);c.forEach(function(c){if(Rc(c[0],c[1],e.getName())){var f=c[0].mb(e.getName());d(a,b,f,c)}},this)},a)}
function Xc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Nc(a,b,c,d))}function Yc(a,b,c,d){0!=c.length&&(Nc(a,b,c,d),Sc(a,b,c,d))}function Zc(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),Sc(a,b,c,d))}
function $c(a,b,c){var d={oe:[],kf:new Kc},e=new Kc;e.Ub(b.getName(),c.map(function(a){return a.id()}));do{var f=new Kc;e.keys().forEach(function(a){var b=this.g.table(a);a=e.get(a).map(function(a){return[this.U.get(a),null]},this);b=Vc(this,b,a);null!==b&&(d.oe.unshift.apply(d.oe,b.keys()),f.Wd(b))},a);e=f;d.kf.Wd(e)}while(0<e.size);return d};function ad(a){this.va=x();this.la=x();this.wa=x();this.w=a}m=ad.prototype;m.getName=g("w");m.add=function(a){if(this.wa.has(a.id())){var b=[this.wa.get(a.id()),a];this.la.set(a.id(),b);this.wa.delete(a.id())}else this.va.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.va.has(c)?this.va.set(c,b):(this.la.has(c)&&(a=[this.la.get(a[0].id())[0],b]),this.la.set(c,a))};
m.delete=function(a){if(this.va.has(a.id()))this.va.delete(a.id());else if(this.la.has(a.id())){var b=this.la.get(a.id())[0];this.la.delete(a.id());this.wa.set(a.id(),b)}else this.wa.set(a.id(),a)};m.Wd=function(a){a.va.forEach(function(a){this.add(a)},this);a.la.forEach(function(a){this.modify(a)},this);a.wa.forEach(function(a){this.delete(a)},this)};
function Cc(a){var b=[];a.va.forEach(function(a){b.push([null,a])});a.la.forEach(function(a){b.push(a)});a.wa.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Vb(this.va).toString()+"], ["+Vb(this.la).toString()+"], ["+Vb(this.wa).toString()+"]"};function bd(a){var b=new ad(a.w);a.va.forEach(function(a){b.delete(a)});a.wa.forEach(function(a){b.add(a)});a.la.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.hg=function(){return 0==this.va.size&&0==this.wa.size&&0==this.la.size};function cd(a,b){this.aa=x();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.g=a.b(A);this.U=a.b(kc);this.B=a.b(lc);this.za=new Lc(a);this.dd=new zc(a);this.hb=x()}function hc(a){var b=[];Vb(a.hb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.Cb()&&(a.Ca().forEach(function(a){b.push(this.B.get(a.j()))},this),b.push(this.B.get(a.getName()+".#")))},a);return b}m=cd.prototype;m.ca=g("aa");
m.Ab=function(a,b){dd(this,a);Mc(this.za,a,b);Xc(this.za,a,b,0);for(var c=0;c<b.length;c++)ed(this,a,[null,b[c]])};function ed(a,b,c){var d=b.getName(),e=a.hb.get(d)||new ad(d);a.hb.set(d,e);try{Dc(a.dd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.U.set(d,f),e.add(f)):null!==b&&null!==f?(a.U.set(d,f),e.modify(c)):null!==b&&null===f&&(a.U.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){dd(this,a);Mc(this.za,a,b);b=b.map(function(a){return[this.U.get(a.id()),a]},this);fd(this,a,b);Yc(this.za,a,b,0);b.forEach(function(b){ed(this,a,b)},this)};m.Rd=function(a,b){dd(this,a);Mc(this.za,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=this.za;f=d;var k=a.xb().od;null===k?f=null:(k=k.j(),f=f.mb(k),f=h.B.get(k).get(f),f=0==f.length?null:f[0]);null!=f?(e=this.U.get(f),d.ra=f,Yc(this.za,a,[[e,d]],0)):Xc(this.za,a,[d],0);ed(this,a,[e,d])}};
m.remove=function(a,b){dd(this,a);gd(this,a,b);Zc(this.za,a,b,0);for(var c=0;c<b.length;c++)ed(this,a,[b[c],null])};function fd(a,b,c){b=Tc(a.g.info(),b.getName(),1);if(null!==b){var d=Wc(a.za,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.g.table(b.Nd.Be),d=this.U.get(a),e=c.$a(d.Ia());e.l[b.Nd.ub]=b.xg.l[b.Nd.Gc];ed(this,c,[d,e])},this)},a)}}
function gd(a,b,c){if(null!==Tc(a.g.info(),b.getName(),1)){b=$c(a.za,b,c);var d=b.kf;b.oe.forEach(function(a){var b=this.g.table(a);a=d.get(a).map(function(a){return this.U.get(a)},this);Zc(this.za,b,a,0);a.forEach(function(a){ed(this,b,[a,null])},this)},a)}}function dc(a){a.hb.forEach(function(a){var b=this.aa.get(a.getName());Xc(this.za,b,y(a.va),1);Zc(this.za,b,y(a.wa),1);Yc(this.za,b,y(a.la),1)},a)}m.ka=aa();m.Jb=function(){var a=y(this.hb).map(function(a){return bd(a)});this.dd.update(a)};
function dd(a,b){if(!a.aa.has(b.getName()))throw new D(106,b.getName());};function E(a,b,c,d){this.from=a;this.o=b;this.ea=this.from==F?!1:c;this.na=this.o==F?!1:d}var F=new (aa());E.prototype.toString=function(){return(this.ea?"(":"[")+(this.from==F?"unbound":this.from)+", "+(this.o==F?"unbound":this.o)+(this.na?")":"]")};function hd(a){if(id(a))return[];var b=null,c=null;a.from==F||(b=new E(F,a.from,!1,!a.ea));a.o==F||(c=new E(a.o,F,!a.na,!1));return[b,c].filter(function(a){return null!==a})}E.prototype.reverse=function(){return new E(this.o,this.from,this.na,this.ea)};
function jd(a,b){var c=kd(a.from,b.from,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b;a=1==c?a:b;return d.o==F||d.o>a.from||d.o==a.from&&!d.na&&!a.ea}function ld(){return new E(F,F,!1,!1)}function id(a){return a.from==F&&a.o==F}function md(a){return a.from==a.o&&a.from!=F&&!a.ea&&!a.na}E.prototype.contains=function(a){var b=this.o==F||a<this.o||a==this.o&&!this.na;return(this.from==F||a>this.from||a==this.from&&!this.ea)&&b};
function kd(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function nd(a,b){var c=kd(a.from,b.from,!0,a.ea,b.ea);0==c&&(c=kd(a.o,b.o,!1,a.na,b.na));return c}function od(a){if(0==a.length)return[];a.sort(nd);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new E(F,a[c].from,!1,!0):c==b.length-1?new E(a[c-1].o,F,!0,!1):new E(a[c-1].o,a[c].from,!0,!0);return b};function pd(a){this.jc=[];n(a)&&this.add(a)}pd.prototype.toString=function(){return this.jc.map(function(a){return a.toString()}).join(",")};pd.prototype.jb=function(a){return this.jc.some(function(b){return b.contains(a)})};pd.prototype.zb=g("jc");
pd.prototype.add=function(a){if(0!=a.length)if(a=this.jc.concat(a),1==a.length)this.jc=a;else{a.sort(nd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(jd(c,a[d])){var e=a[d],f=ld();if(c.from!=F&&e.from!=F){var h=kd(c.from,e.from,!0);1!=h?(f.from=c.from,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.from=e.from,f.ea=e.ea)}c.o!=F&&e.o!=F&&(h=kd(c.o,e.o,!1),-1!=h?(f.o=c.o,f.na=0!=h?c.na:c.na&&e.na):(f.o=e.o,f.na=e.na));c=f}else b.push(c),c=a[d];b.push(c);this.jc=b}};
function qd(a,b){var c=[];a.zb().map(function(a){return b.zb().map(function(b){var c;if(jd(a,b)){c=ld();var d=kd(a.from,b.from,!0),d=0==d?a.ea?a:b:-1!=d?a:b;c.from=d.from;c.ea=d.ea;a.o==F||b.o==F?b=a.o==F?b:a:(d=kd(a.o,b.o,!1),b=0==d?a.na?a:b:-1==d?a:b);c.o=b.o;c.na=b.na}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new pd(c.filter(function(a){return null!==a}))};function G(a,b){this.entries=a;this.L=B(b);this.Ya=null}G.prototype.m=function(){return C(this.L)};function rd(a){return a.entries.map(function(a){return a.ua.l})}function sd(a){return a.entries.map(function(a){return a.ua.id()})}function td(a,b){return a.Ya.get(b.j())}var ud=null;function vd(){null===ud&&(ud=new G([],[]));return ud}
function wd(a){if(0==a.length)return vd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=x();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=x(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(y(e),C(a[0].L))}function xd(a){if(0==a.length)return vd();var b=x();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(y(b),C(a[0].L))}
function yd(a,b){var c=1<b.length;a=a.map(function(a){return new zd(a,c)});return new G(a,b)}function zd(a,b){this.ua=a;this.id=Ad++;this.Td=b}var Ad=0;function H(a,b){var c=b.Ja;return null!==c&&a.ua.l.hasOwnProperty(c)?a.ua.l[c]:a.Td?a.ua.l[Bd(b.G())][b.getName()]:a.ua.l[b.getName()]}function Cd(a,b,c){var d=b.Ja;if(null!=d)a.ua.l[d]=c;else if(a.Td){var d=Bd(b.G()),e=a.ua.l[d];null==e&&(e={},a.ua.l[d]=e);e[b.getName()]=c}else a.ua.l[b.getName()]=c}
function Dd(a,b,c,d){function e(a,b){if(a.Td){a=a.ua.l;for(var c in a)f[c]=a[c]}else f[b[0]]=a.ua.l}var f={};e(a,b);e(c,d);a=new Wb(-1,f);return new zd(a,!0)};q("lf.bind",function(a){return new Ed(a)});function Ed(a){this.fa=a}q("lf.Binder",Ed);Ed.prototype.Ba=g("fa");function Fd(){this.Te=Gd();var a=Hd();this.Mb=x();this.Mb.set(1,Id());this.Mb.set(2,Jd());this.Mb.set(4,a);this.Mb.set(3,a);this.Mb.set(5,Kd());this.Mb.set(6,Ld())}var Md;function Nd(){null!=Md||(Md=new Fd);return Md}function Od(a,b,c){a=a.Mb.get(b)||null;if(null===a)throw new D(550);c=a.get(c)||null;if(null===c)throw new D(550);return c}
function Gd(){function a(a){return a}var b=x();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}function Id(){var a=x();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Hd(){var a=Id();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Kd(){var a=Hd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}function Ld(){var a=x();a.set("eq",function(a,c){if(null!==c)throw new D(550);return null===a});a.set("neq",function(a,c){if(null!==c)throw new D(550);return null!==a});return a}
function Jd(){var a=x();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(b){return b.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function I(){this.h=this.C=null}var Pd=[];I.prototype.getParent=g("C");I.prototype.bb=function(){for(var a=this;null!==a.getParent();)a=a.getParent();return a};function Qd(a){for(var b=0;null!==a.getParent();)b++,a=a.getParent();return b}function J(a){return a.h||Pd}function Rd(a,b){return J(a)[b]||null}function Sd(a,b,c){b.C=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function L(a,b){b.C=a;null===a.h?a.h=[b]:a.h.push(b)}
function Td(a,b){var c=a.h&&a.h[b];return c?(c.C=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}I.prototype.removeChild=function(a){return Td(this,J(this).indexOf(a))};function Ud(a,b,c){Rd(a,c).C=null;b.C=a;a.h[c]=b}function Vd(a,b,c){!1!==b.call(c,a)&&J(a).forEach(function(a){Vd(a,b,c)})};function Wd(){I.call(this);this.ra=Xd++}r(Wd,I);var Xd=0;m=Wd.prototype;m.eval=fa;m.Lc=fa;m.Eb=fa;m.ab=fa;m.m=fa;m.V=g("ra");function Yd(a,b,c){Wd.call(this);this.I=a;this.value=b;this.D=c;this.sc=Od(Nd(),this.I.H(),this.D);this.Ta=!1;this.ac=b}r(Yd,Wd);m=Yd.prototype;m.Eb=function(){var a=new Yd(this.I,this.value,this.D);a.ac=this.ac;a.Lc(this.Ta);var b=this.V();a.ra=b;return a};m.ab=function(a){return null!=a?(a.push(this.I),a):[this.I]};m.m=function(a){a=null!=a?a:B();a.add(this.I.G());return a};m.Lc=ca("Ta");
function Zd(a){var b=!1;a.value instanceof Ed||(b="array"==ga(a.value)?!a.value.some(function(a){return a instanceof Ed}):!0);if(!b)throw new D(501);}m.eval=function(a){Zd(this);if("in"==this.D)return $d(this,a);var b=a.entries.filter(function(a){return this.sc(H(a,this.I),this.value)!=this.Ta},this);return new G(b,a.m())};
m.bind=function(a){if(this.ac instanceof Ed){var b=this.ac.Ba();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==ga(this.ac)&&(this.value=this.ac.map(function(b){if(b instanceof Ed){var c=b.Ba();if(a.length<=c)throw new D(510);return a[b.Ba()]}return b}))};function $d(a,b){var c=B(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Ta}.bind(a);a=b.entries.filter(function(a){return d(H(a,this.I))},a);return new G(a,b.m())}
m.toString=function(){return"value_pred("+this.I.j()+" "+this.D+(this.Ta?"(complement)":"")+" "+this.value+")"};m.gd=function(){Zd(this);return null!==this.value&&("between"==this.D||"in"==this.D||"eq"==this.D||"gt"==this.D||"gte"==this.D||"lt"==this.D||"lte"==this.D)};
m.qe=function(){var a=null;if("between"==this.D)a=new E(ae(this,this.value[0]),ae(this,this.value[1]),!1,!1);else{if("in"==this.D)return a=this.value.map(function(a){return new E(a,a,!1,!1)}),new pd(this.Ta?od(a):a);a=ae(this,this.value);a="eq"==this.D?new E(a,a,!1,!1):"gte"==this.D?new E(a,F,!1,!1):"gt"==this.D?new E(a,F,!0,!1):"lte"==this.D?new E(F,a,!1,!1):new E(F,a,!1,!0)}return new pd(this.Ta?hd(a):[a])};function ae(a,b){return 2==a.I.H()?b.getTime():b};function be(a){this.da=a;this.Uc=this.Fa=null}function ce(a,b){null===a.Fa&&null!=a.u&&(a.Fa=de(a.u));return a.Fa.get(b)||null}function de(a){var b=x();Vd(a,function(a){b.set(a.V(),a)});return b}be.prototype.ca=fa;be.prototype.clone=fa;function fe(a,b){b.u&&(a.u=b.u.Eb());a.Uc=b}be.prototype.bind=function(){return this};function ge(a,b){a=a.u;null!=a&&Vd(a,function(a){a instanceof Yd&&a.bind(b)})};function he(a){be.call(this,a)}r(he,be);function ie(a){var b="";a.forEach(function(c,d){b+=c.I.j()+" ";b+=1==c.order?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}he.prototype.ca=function(){return B(this.from)};he.prototype.clone=function(){var a=new he(this.da);fe(a,this);this.f&&(a.f=this.f.slice());this.from&&(a.from=this.from.slice());a.W=this.W;a.K=this.K;this.M&&(a.M=this.M.slice());this.qa&&(a.qa=this.qa.slice());this.Qb&&(a.Qb=this.Qb);this.Wb&&(a.Wb=this.Wb);a.eb=this.eb;return a};
he.prototype.bind=function(a){he.gb.bind.call(this,a);null!=this.Qb&&(this.W=a[this.Qb.Ba()]);null!=this.Wb&&(this.K=a[this.Wb.Ba()]);ge(this,a);return this};function je(a,b){this.Ga=a;this.aa=b}je.prototype.bb=g("Ga");je.prototype.ca=g("aa");function ke(a){var b=B();a.forEach(function(a){a.ca().forEach(b.add.bind(b))});return b};function le(a,b){this.global=a;this.Na=a.b(jc);this.pd=b.map(function(a){return a.context});this.cf=b.map(function(a){return a.de});this.Hd=ke(this.cf);this.re=me(this);this.Db=w()}function me(a){return a.pd.some(function(a){return!(a instanceof he)})?1:0}m=le.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.bb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return v()}var b=0==this.re?void 0:new cd(this.global,this.Hd),c=[],d=this.cf.slice(),e=this.pd;return a().then(function(){this.ja=this.Na.Fb(this.re,C(this.Hd),b);return this.ja.ka()}.bind(this)).then(function(){this.ae(c);return c}.bind(this),function(a){null!=b&&b.Jb();throw a;})};m.H=g("re");m.ca=g("Hd");m.V=function(){return la(this)};m.getPriority=fa;
m.ae=aa();m.X=function(){var a=null;null!=this.ja&&(a=this.ja.X());return null===a?new z(!1,0,0,0,0):a};function ne(a,b){le.call(this,a,b);this.Ib=a.b(oc)}r(ne,le);ne.prototype.getPriority=l(0);ne.prototype.ae=function(a){this.pd.forEach(function(b,c){oe(this.Ib,b,a[c])},this)};function pe(a,b){this.c=a;this.Ib=a.b(oc);this.Ha=a.b(nc);this.dd=new zc(a);this.hb=b;var c=a.b(A);a=this.hb.map(function(a){return c.table(a.getName())});this.aa=B(a);this.Db=w()}m=pe.prototype;m.exec=function(){this.dd.update(this.hb);this.Jc();return v()};m.H=l(1);m.ca=g("aa");m.V=function(){return la(this)};m.getPriority=l(1);m.Jc=function(){var a=qe(this.Ib,this.aa);0!=a.length&&(a=new ne(this.c,a),re(this.Ha,a))};function se(a){this.c=a;this.Na=a.b(jc);this.Ha=a.b(nc)}se.prototype.Zd=function(a){a=new pe(this.c,a);re(this.Ha,a)};function M(a,b){this.Yb=a;this.i=b;this.Xa=x()}q("lf.backstore.FirebaseRawBackStore",M);M.prototype.$c=g("i");M.prototype.ad=function(){throw new D(351);};function te(a,b){var c=w(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function ue(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=w();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Da=function(a){return te(this.i,"@rev/R").then(function(a){this.Qa=a;return te(this.i,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Xa.set(d,b[d]),b[d]>c&&(c=b[d]);a.oa().forEach(function(a){this.Xa.has(a.getName())||(b[a.getName()]=++c)},this);d=this.i.child("@table");return ue(d,b)}.bind(this))};
function ve(a,b,c){var d=a.Xa.get(b);return null!=d?function(){var a={},b=w();this.i.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Qa};return ue(this.i,a)}.bind(a)):v()}M.prototype.qc=function(a){return ve(this,a,l(null)).then(function(){this.Xa.delete(a);return ue(this.i.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.qc;
M.prototype.oc=function(a,b,c){return ve(this,a,function(a){var d=a.P;d[b]=c;return{R:this.Qa+1,T:a.T,P:d}}.bind(this))};M.prototype.addTableColumn=M.prototype.oc;M.prototype.rc=function(a,b){return ve(this,a,function(a){var c=a.P;delete c[b];return{R:this.Qa+1,T:a.T,P:c}}.bind(this))};M.prototype.dropTableColumn=M.prototype.rc;M.prototype.Ic=function(a,b,c){return ve(this,a,function(a){var d=a.P;d[c]=d[b];delete d[b];return{R:this.Qa+1,T:a.T,P:d}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Ic;
M.prototype.kb=function(){throw new D(351);};M.prototype.createRow=M.prototype.kb;M.prototype.zc=g("Yb");M.prototype.getVersion=M.prototype.zc;M.prototype.dc=function(a){var b=w();a=this.Xa.get(a);this.i.orderByChild("T").equalTo(a).once("value",function(a){var c=[];a.forEach(function(a){c.push(a.val().P)});b.resolve(c)});return b.ha};M.prototype.dump=function(){var a={},b=Vb(this.Xa).map(function(b){return this.dc(b).then(function(c){a[b]=c})}.bind(this));return db(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function we(a,b,c){bc.call(this,b,c);this.i=a}r(we,bc);we.prototype.G=function(a){return this.i.xc(a)};
we.prototype.cc=function(){if(0==this.td)return this.O.resolve(),this.O.ha;var a=this.Pa.hb;if(0==a.size)this.O.resolve();else{var b=this.i.Qa+1;this.i.Qa=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var d=this.i.Xa.get(e);a.va.forEach(function(a,e){c[e]={R:b,T:d,P:a.l}});a.la.forEach(function(a,e){c[e]={R:b,T:d,P:a[1].l}});a.wa.forEach(function(a,b){c[b]=null})},this);this.i.i.update(c,function(c){null===c?this.O.resolve():(this.i.Qa=b-1,c=y(a).map(function(a){return xe(this.i,a.getName())},this),
db(c).then(this.O.reject.bind(this.O),this.O.reject.bind(this.O)))}.bind(this))}return this.O.ha};function ye(){this.Aa=x()}function ze(a,b){if(0==b.length)return y(a.Aa);var c=[];b.forEach(function(a){a=this.Aa.get(a)||null;null===a||c.push(a)},a);return c}ye.prototype.getData=g("Aa");ye.prototype.get=function(a){return v(ze(this,a))};function Ae(a,b){b.forEach(function(a){this.Aa.set(a.id(),a)},a)}ye.prototype.put=function(a){Ae(this,a);return v()};function Be(a,b){0==b.length||b.length==a.Aa.size?a.Aa.clear():b.forEach(function(a){this.Aa.delete(a)},a)}
ye.prototype.remove=function(a){Be(this,a);return v()};function Ce(a){return 0==a.Aa.size?0:Vb(a.Aa).reduce(function(a,c){return a>c?a:c},0)};function De(a,b){this.g=a;this.xf=b;this.Hc=x();this.Qa=-1;this.L=x();this.Xa=x();this.Ed=null}m=De.prototype;
m.Da=function(a){this.i=this.xf.child(this.g.name());var b=a||function(){return v()};return te(this.i,"@db/version").then(function(a){return null===a?ue(this.i,Ee(this),!0).then(function(){var a=new M(0,this.i);return b(a)}.bind(this)).then(function(){return this.Da()}.bind(this)):a==this.g.version()?te(this.i,"@rev/R").then(function(a){this.Qa=a;return te(this.i,"@table")}.bind(this)).then(function(a){for(var b in a)this.Xa.set(b,a[b]);a=this.g.oa().map(function(a){return xe(this,a.getName())},this);
return db(a)}.bind(this)).then(function(){Fe(this);Ge(this);return v()}.bind(this)):this.be(a,b).then(function(){return this.Da()}.bind(this))}.bind(this))};m.be=function(a,b){var c=new M(a,this.i);return c.Da(this.g).then(function(){return v()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.i.child("@db");return ue(a,{version:this.g.version()},!0)}.bind(this))};
function Ge(a){a.i.off();a.i.on("child_removed",a.ug.bind(a));a.Fd&&(a.Fd.off(),a.Hc.clear());a.Fd=a.i.orderByChild("R").startAt(a.Qa+1);a.Fd.on("value",a.Zd.bind(a))}function Fe(a){Xb=y(a.L).map(function(a){return Ce(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.ug=function(a){var b=a.val(),c=this.Hc.get(b.T)||null;null===c&&(c=B(),this.Hc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Zd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Qa&&(this.Qa=b,a=He(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),c=Vb(a.wa);0<c.length&&Be(b,c);var f=y(a.va);a.la.forEach(function(a){f.push(a[1])});Ae(b,f)},this),0<a.length&&this.Dc(a),Ge(this))};
function He(a,b){var c=B(),d=x();a.Xa.forEach(function(a,b){var e=this.L.get(b),f=new ad(b);this.Hc.has(a)&&(b=C(this.Hc.get(a)),b.forEach(function(a){c.add(a)}),ze(e,b).forEach(function(a){f.delete(a)}));d.set(a,f)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var e=a.val();a=d.get(e.T);var k=this.L.get(a.getName()),e=this.g.table(a.getName()).$a({id:b,value:e.P});k.getData().has(b)?a.modify([ze(k,[b])[0],e]):a.add(e)}}}.bind(a));return y(d).filter(function(a){return!a.hg()})}
function xe(a,b){var c=w(),d=a.Xa.get(b),e=a.g.table(b);a.i.orderByChild("T").equalTo(d).once("value",function(a){var d=new ye,f=[];a.forEach(function(a){f.push(e.$a({id:parseInt(a.key(),10),value:a.val().P}))});Ae(d,f);this.L.set(b,d);c.resolve()}.bind(a));return c.ha}function Ee(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.Qa=1;b["@table"]={};a.g.oa().forEach(function(a,d){a=a.getName();b["@table"][a]=d;this.L.set(a,new ye);this.Xa.set(a,d)},a);return b}
m.Fb=function(a,b,c){return new we(this,a,c)};m.xc=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ca("Ed");m.Dc=function(a){null!=this.Ed&&this.Ed(a)};function N(a,b,c,d){this.i=b;this.ja=c;this.Yb=a;this.Sc=d}q("lf.backstore.IndexedDBRawBackStore",N);N.prototype.$c=g("i");N.prototype.getRawDBInstance=N.prototype.$c;N.prototype.ad=g("ja");N.prototype.getRawTransaction=N.prototype.ad;N.prototype.qc=function(a){return new u(function(b,c){try{this.i.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.qc;
function Ie(a,b,c,d){return new u(function(a,f){var e;try{var k=this.ja.objectStore(b);e=k.openCursor()}catch(p){f(p);return}e.onsuccess=function(){var b=e.result;b?(c(b),b.continue()):(d(k),a())};e.onerror=f},a)}function Je(a){return a instanceof ArrayBuffer?$b(a):a instanceof Date?a.getTime():a}
function Ke(a,b,c){function d(a){var b=uc(a.value),d=b.l,e;for(e in d){var f=Yb(d[e]);c(f);d[e]=f.Ia()}a.update(b.Ia())}function e(a){var b=Yb(a.value);c(b);a.update(b.Ia())}return Ie(a,b,a.Sc?d:e,aa())}N.prototype.oc=function(a,b,c){var d=Je(c);return Ke(this,a,function(a){a.l[b]=d})};N.prototype.addTableColumn=N.prototype.oc;N.prototype.rc=function(a,b){return Ke(this,a,function(a){delete a.l[b]})};N.prototype.dropTableColumn=N.prototype.rc;
N.prototype.Ic=function(a,b,c){return Ke(this,a,function(a){a.l[c]=a.l[b];delete a.l[b]})};N.prototype.renameTableColumn=N.prototype.Ic;function Le(a,b){var c=[];return new u(function(a,e){var d;try{d=this.ja.objectStore(b).openCursor()}catch(h){e(h);return}d.onsuccess=function(){var b=d.result;if(b){if(this.Sc){var e=uc(b.value).l,f;for(f in e)c.push(e[f])}else c.push(b.value);b.continue()}else a(c)}.bind(this);d.onerror=e},a)}N.prototype.kb=function(a){var b={},c;for(c in a)b[c]=Je(a[c]);return Zb(b)};
N.prototype.createRow=N.prototype.kb;N.prototype.zc=g("Yb");N.prototype.getVersion=N.prototype.zc;N.prototype.dump=function(){for(var a=this.i.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.dc(d))}return db(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.dc=function(a){return Le(this,a).then(function(a){return a.map(function(a){return a.value})})};function Me(a,b){this.Y=a;this.Gb=b}Me.prototype.get=function(a){if(0==a.length)return null!=this.Y.getAll?Ne(this):Oe(this);a=a.map(function(a){return new u(function(b,d){var c;try{c=this.Y.get(a)}catch(f){d(f);return}c.onerror=d;c.onsuccess=function(a){b(this.Gb(a.target.result))}.bind(this)},this)},this);return db(a)};
function Oe(a){return new u(function(a,c){var b=[],e;try{e=this.Y.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(b.push(this.Gb(c.value)),c.continue()):a(b)}.bind(this)},a)}function Ne(a){return new u(function(a,c){var b;try{b=this.Y.getAll()}catch(e){c(e);return}b.onerror=c;b.onsuccess=function(){var c=b.result.map(function(a){return this.Gb(a)},this);a(c)}.bind(this)},a)}
Me.prototype.Rb=function(a){return new u(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Me.prototype.put=function(a){if(0==a.length)return v();a=a.map(function(a){return this.Rb(function(){return this.Y.put(a.Ia())}.bind(this))},this);return db(a)};
Me.prototype.remove=function(a){return new u(function(b,c){var d=this.Y.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Rb(function(){return this.Y.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Rb(function(){return this.Y.delete(a)}.bind(this))},this);db(d).then(b,c)}.bind(this);d.onerror=c},this)};function Pe(a,b,c,d,e){bc.call(this,c,e);this.c=a;this.ja=b;this.Sc=d;this.ja.oncomplete=this.O.resolve.bind(this.O);this.ja.onabort=this.O.reject.bind(this.O)}r(Pe,bc);Pe.prototype.G=function(a,b,c){return this.Sc?(c=null!=c?c:0,a=this.ja.objectStore(a),new vc(a,b,0==c?sa(xc,this.c):yc)):new Me(this.ja.objectStore(a),b)};Pe.prototype.cc=function(){return this.O.ha};function Qe(a,b){this.c=a;this.g=b;this.Bd=b.ee.Of||!1}m=Qe.prototype;
m.Da=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return v()};return new u(function(a,e){var d;try{d=b.open(this.g.name(),this.g.version())}catch(h){e(h);return}d.onerror=function(a){a=a.target.error;e(new D(361,a.name,a.message))};d.onupgradeneeded=function(a){Re(this,c,a).then(aa(),e)}.bind(this);d.onsuccess=function(b){this.i=b.target.result;this.ke().then(function(b){Xb=Math.max(Xb,b+1);a(this.i)}.bind(this))}.bind(this)},
this)};function Re(a,b,c){var d=c.target.result;c=new N(c.oldVersion,d,c.target.transaction,a.Bd);Se(d);a.g.oa().forEach(sa(a.Hf,d),a);return b(c)}function Se(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(f){}})}
m.Hf=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Cb()&&(b.Ca().forEach(function(b){Te(a,b.j())},this),Te(a,Ue(b)))};function Te(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Fb=function(a,b,c){b=this.i.transaction(Ve(b),0==a?"readonly":"readwrite");return new Pe(this.c,b,a,this.Bd,c)};
function Ve(a){var b=B();a.forEach(function(a){b.add(a.getName());a.Cb()&&(a.Ca().forEach(function(a){b.add(a.j())}),b.add(Ue(a)))});return C(b)}
m.ke=function(a){function b(){if(0==d.length)return v();var a=d.shift();return c(a).then(b)}function c(b){return new u(function(c,d){var k;try{k=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ba){d(ba);return}k.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};k.onerror=function(){c(f)}})}var d=this.g.oa().map(function(a){return a.getName()}),e=this.i,f=0,h=function(a){return this.Bd?(a=uc(a.value),Object.keys(a.l).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new u(function(a){b().then(function(){a(f)})})};m.close=function(){this.i.close()};m.xc=function(){throw new D(511);};m.subscribe=aa();m.Dc=aa();function We(a,b,c){bc.call(this,b,c);this.Y=a;0==b&&this.O.resolve()}r(We,bc);We.prototype.G=function(a){return this.Y.xc(a)};We.prototype.cc=function(){this.O.resolve();return this.O.ha};function Xe(a){this.g=a;this.L=x()}m=Xe.prototype;m.Da=function(){this.g.oa().forEach(this.cg,this);return v()};m.xc=function(a){var b=this.L.get(a)||null;if(null===b)throw new D(101,a);return b};m.Fb=function(a,b,c){return new We(this,a,c)};function Ye(a,b){if(!a.L.has(b)){var c=new ye;a.L.set(b,c)}}m.cg=function(a){Ye(this,a.getName());a.Cb()&&(a.Ca().forEach(function(a){Ye(this,a.j())},this),Ye(this,Ue(a)))};m.close=aa();m.subscribe=aa();m.Dc=aa();function Ze(a){Xe.call(this,a);this.ld=null}r(Ze,Xe);Ze.prototype.subscribe=function(a){null===this.ld&&(this.ld=a)};Ze.prototype.Dc=function(a){null===this.ld||this.ld(a)};function $e(a,b,c){this.ja=a;this.w='"'+b+'"';this.Gb=c}$e.prototype.get=function(a){var b=this.Gb;return af(this.ja,"SELECT id, value FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var c=a.rows.length,e=Array(c),f=0;f<c;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
$e.prototype.put=function(a){if(0==a.length)return v();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a.forEach(function(a){af(this.ja,b,[a.id(),JSON.stringify(a.l)])},this);return v()};$e.prototype.remove=function(a){af(this.ja,"DELETE FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return v()};function bf(a,b,c){bc.call(this,b,c);this.i=a;this.L=x();this.Id=[]}r(bf,bc);function cf(a){return a.replace(".","__d__").replace("#","__s__")}bf.prototype.G=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new $e(this,cf(a),b),this.L.set(a,c));return c};function af(a,b,c,d){var e=w();a.Id.push({Jg:b,yg:c,transform:d,O:e});return e.ha}
bf.prototype.cc=function(){var a=null,b=this.O.reject.bind(this.O),c=function(a,b){this.O.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var f=h;null!=a.transform&&null!=h&&(f=a.transform(h));d.push(f);a.O.resolve(f)}0<this.Id.length?(a=h=this.Id.shift(),b.executeSql(h.Jg,h.yg,e,c)):this.O.resolve(d)}.bind(this);0==this.td?this.i.readTransaction(e,b):this.i.transaction(e,b);return this.O.ha};function O(a,b,c){this.i=c;this.c=a;this.Yb=b}q("lf.backstore.WebSqlRawBackStore",O);O.prototype.$c=g("i");O.prototype.getRawDBInstance=O.prototype.$c;O.prototype.ad=function(){throw new D(356);};O.prototype.getRawTransaction=O.prototype.ad;function df(a){return new bf(a.i,1,new cd(a.c,B()))}O.prototype.qc=function(a){var b=df(this);af(b,"DROP TABLE "+a,[]);return b.ka()};O.prototype.dropTable=O.prototype.qc;
O.prototype.dc=function(a){var b=df(this);af(b,"SELECT id, value FROM "+a,[]);return b.ka().then(function(a){for(var b=a[0].rows.length,c=Array(b),f=0;f<b;++f)c[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return v(c)})};function ef(a,b,c){var d=df(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.dc(b).then(function(a){a.forEach(function(a){a=c(a);af(d,e,[JSON.stringify(a.value),a.id])});return d.ka()})}
O.prototype.oc=function(a,b,c){var d=Je(c);return ef(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.oc;O.prototype.rc=function(a,b){return ef(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.rc;O.prototype.Ic=function(a,b,c){return ef(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Ic;O.prototype.kb=function(a){var b={},c;for(c in a)b[c]=Je(a[c]);return Zb(b)};
O.prototype.createRow=O.prototype.kb;O.prototype.zc=g("Yb");O.prototype.getVersion=O.prototype.zc;function ff(a){af(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var b=Array(a.rows.length),d=0;d<b.length;++d)b[d]=a.rows.item(d).tbl_name;return b})}
O.prototype.dump=function(){var a=w(),b=df(this);ff(b);var c={};b.ka().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.dc(a).then(function(b){c[a]=b})},this);db(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};O.prototype.dump=O.prototype.dump;function gf(a,b,c){this.c=a;this.g=b;this.Ig=c||1}m=gf.prototype;m.Da=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return v()};return new u(function(a,d){var c=window.openDatabase(this.g.name(),"",this.g.name(),this.Ig);if(null!=c)this.i=c,hf(this,b).then(function(){this.ke().then(a,d)}.bind(this),function(a){if(a instanceof D)throw a;throw new D(354,a.message);});else throw new D(354);},this)};
function hf(a,b){var c=w(),d=new bf(a.i,1,new cd(a.c,B()));af(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);af(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ka().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.g.version()?this.be(b,d).then(c.resolve.bind(c)):d>this.g.version()?c.reject(new D(108)):c.resolve()}.bind(a),c.reject.bind(c));return c.ha}m.Fb=function(a,b,c){if(null!=this.i)return new bf(this.i,a,c);throw new D(2);};m.close=aa();
m.xc=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Dc=function(){throw new D(355);};m.be=function(a,b){return jf(this).then(function(){return a(new O(this.c,b,this.i))}.bind(this))};
function jf(a){var b=a.g.oa(),c=new bf(a.i,1,new cd(a.c,B())),d=new bf(a.i,1,new cd(a.c,B()));af(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);ff(c);return c.ka().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){af(d,"DROP TABLE "+('"'+a+'"'),[])});var e=[],k=[],p=[];b.map(function(a){-1==c.indexOf(a.getName())&&e.push(a.getName());a.Cb&&(a.Ca().forEach(function(a){a=cf(a.j());e.push(a);k.push(a)}),a=cf(Ue(a)),e.push(a),p.push(a))});
e.forEach(function(a){af(d,"CREATE TABLE "+('"'+a+'"')+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ka()})}m.ke=function(){var a=0,b=w(),c=function(b){var c=new bf(this.i,0);af(c,"SELECT MAX(id) FROM "+('"'+b+'"'),[]);return c.ka().then(function(b){b=b[0].rows.item(0)["MAX(id)"];a=Math.max(b,a)})}.bind(this),d=this.g.oa().map(function(a){return c(a.getName())});db(d).then(function(){Xb=Math.max(Xb,a+1);b.resolve()},function(a){b.reject(a)});return b.ha};function kf(a){this.$=x();this.Xb=x();a.oa().forEach(function(a){this.Xb.set(a.getName(),B())},this)}m=kf.prototype;m.set=function(a,b){this.$.set(b.id(),b);this.Xb.get(a).add(b.id())};m.Ub=function(a,b){var c=this.Xb.get(a);b.forEach(function(a){this.$.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.$.get(a)||null};function mf(a,b){return b.map(function(a){return this.get(a)},a)}
m.Sa=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.Xb.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.$.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.$.get(b),d.push(c));return d};m.remove=function(a,b){this.$.delete(b);this.Xb.get(a).delete(b)};m.Sg=function(a){return null!=a?this.Xb.get(a).size:this.$.size};m.clear=function(){this.$.clear();this.Xb.clear()};function nf(a,b,c){var d=0,e=a.length;for(c=c||of;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function of(a,b){return a-b}function pf(a,b,c){c=nf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function qf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(n(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function rf(){this.ia=0;this.Cc=null}rf.prototype.add=function(a,b){this.ia+=b;this.Cc=null===this.Cc?a:a>this.Cc?a:this.Cc};rf.prototype.remove=function(a,b){this.ia-=b};rf.prototype.clear=function(){this.ia=0};function sf(a,b){a.clear();b.forEach(function(a){this.ia+=a.ia},a)};function tf(a,b,c,d){this.w=a;this.Z=b;this.sf=c;this.ya=new rf;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=uf(this,d);this.ta=d=vf(d)}else this.clear()}var wf=[];m=tf.prototype;m.getName=g("w");m.toString=function(){return this.ta.toString()};m.add=function(a,b){this.ta=this.ta.Ab(a,b)};m.set=function(a,b){this.ta=this.ta.Ab(a,b,!0)};m.remove=function(a,b){this.ta=this.ta.remove(a,b)};m.get=function(a){return this.ta.get(a)};
m.Xc=function(a){if(null==a)return this.X().ia;if(a instanceof E){if(id(a))return this.X().ia;if(md(a))return this.get(a.from).length}return this.Sa([a]).length};m.X=g("ya");m.Qd=function(a,b,c,d){c=Array(a);this.ta.fill({offset:b?this.ya.ia-a-d:d,count:a,ne:0},c);return b?c.reverse():c};
m.Sa=function(a,b,c,d){var e=xf(this.ta).a[0];if(!n(e)||0==c)return wf;b=b||!1;c=null!=c?Math.min(c,this.ya.ia):this.ya.ia;d=d||0;var f=Math.min(Math.max(this.ya.ia-d,0),c);if(0==f)return wf;if(!n(a)||1==a.length&&a[0]instanceof E&&id(a[0]))return this.Qd(f,b,c,d);a=this.Z.nf(a);var h=Array(b?this.ya.ia:f),k={count:0,W:h.length,reverse:b,K:d},p=1<this.ib().Ud();a.forEach(function(a){for(var b=this.Z.qd(a),b=this.Z.Sd(a)?e:b[0],b=this.ta.Uf(b),c=0;null!=b&&k.count<k.W;){if(p){for(var d=b,f=a,K=k,zb=
h,Pc=d.s.ib(),ee=-1,La=0;La<d.a.length;++La)if(Pc.Bb(d.a[La],f)){ee=La;break}if(-1!=ee)for(La=ee;La<d.a.length&&K.count<K.W;++La)Pc.Bb(d.a[La],f)&&yf(d,K,zb,La)}else b.Sa(a,k,h);0!=k.K||b.fd(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?qf(h,b,c,d):h};m.clear=function(){this.ta=zf(this);this.ya.clear()};m.jb=function(a){return this.ta.jb(a)};m.min=function(){return this.Hb(this.Z.min.bind(this.Z))};m.max=function(){return this.Hb(this.Z.max.bind(this.Z))};
function Af(a,b,c){if(!a.Z.Jd(b.a[c]))if(1<b.a[c].length){if(null===b.a[c][0])return null}else return null;return[b.a[c],a.sf?[b.A[c]]:b.A[c]]}m.Hb=function(a){var b;a:{b=xf(this.ta);var c=0;do if(c>=b.a.length)b=b.xa,c=0;else{var d=Af(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Bf(this.ta);d=c.a.length-1;do if(0>d)c=c.pb,d=0;else{var e=Af(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.La=g("sf");m.ib=g("Z");
m.Oa=function(a,b){return null!=a?0==this.Z.compare(a,b):!1};m.Ia=function(){for(var a=[],b=xf(this.ta);b;)a.push(new Wb(b.ra,[b.a,b.A])),b=b.xa;return a};function Cf(a,b,c,d){a=new tf(b,a,c);d=Df(d,a);a.ta=d;return a}function Ef(a,b){this.ra=a;this.s=b;this.lb=0;this.xa=this.pb=this.C=null;this.a=[];this.A=[];this.h=[];this.Uf=1==b.ib().Ud()?this.Je:this.Ie}function zf(a){return new Ef(Xb++,a)}function P(a){return 0==a.lb}m=Ef.prototype;m.next=g("xa");
function Ff(a){function b(a){return null!=a?a.ra.toString():"_"}var c=a.ra+"["+a.a.join("|")+"]",d=a.h.map(function(a){return a.ra}).join("|"),e=a.A.join("/"),f=b(a.pb)+"{",f=P(a)?f+e:f+d,f=f+"}"+b(a.C);a.xa&&(a=Ff(a.xa),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Ff(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function xf(a){return P(a)?a:xf(a.h[0])}function Bf(a){return P(a)?a:Bf(a.h[a.h.length-1])}
function Gf(a,b){b&&(b.pb=a);a&&(a.xa=b)}function uf(a,b){for(var c=b.length,d=0,e=a=zf(a);0<c;){var f=768<=c?511:257<=c&&511>=c?c:257,h=b.slice(d,d+f);a.a=h.map(function(a){return a.key});a.A=h.map(function(a){return a.value});d+=f;c-=f;0<c&&(f=zf(a.s),Gf(a,f),a=f)}return e}function Hf(a){var b=a[0],c=zf(b.s);c.lb=b.lb+1;c.h=a;for(b=0;b<a.length;++b)a[b].C=c,0<b&&c.a.push(a[b].a[0]);return c}
function vf(a){var b=a,c=[];do c.push(b),b=b.xa;while(b);if(512>=c.length)b=Hf(c);else{var d=c.length,e=0,b=zf(a.s);for(b.lb=a.lb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Hf(f);h.C=b;b.h.length&&(b.a.push(f[0].a[0]),Gf(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=If(this,a);if(P(this)){var c=wf;this.s.Oa(this.a[b],a)&&(c=c.concat(this.A[b]));return c}b=this.s.Oa(this.a[b],a)?b+1:b;return this.h[b].get(a)};
m.jb=function(a){var b=If(this,a);return this.s.Oa(this.a[b],a)?!0:P(this)?!1:this.h[b].jb(a)};m.remove=function(a,b){Jf(this,a,-1,b);return null===this.C?(a=this,1==this.h.length&&(a=this.h[0],a.C=null),a):this};function Kf(a){return P(a)?a.a[0]:Kf(a.h[0])}function Lf(a){a.a=[];for(var b=1;b<a.h.length;++b)a.a.push(Kf(a.h[b]))}
function Jf(a,b,c,d){var e=If(a,b),f=P(a);if(!f){var h=a.s.Oa(a.a[e],b)?e+1:e;if(Jf(a.h[h],b,h,d))Lf(a);else return!1}else if(!a.s.Oa(a.a[e],b))return!1;if(a.a.length>e&&a.s.Oa(a.a[e],b)){if(n(d)&&!a.s.La()&&f&&(h=a.A[e],d=nf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.s.X().remove(b,1),a.A[e].length))return!1;a.a.splice(e,1);f&&(f=a.s.La()?1:a.A[e].length,a.A.splice(e,1),a.s.X().remove(b,f))}if(256>a.a.length&&null!==a.C){a:{if(a.xa&&256<a.xa.a.length)b=a.xa,e=d=0,f=a.a.length+1;else if(a.pb&&
256<a.pb.a.length)b=a.pb,d=a.pb.a.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.a.splice(f,0,b.a[d]);b.a.splice(d,1);d=P(a)?a.A:a.h;P(a)?h=b.A:(h=b.h,h[e].C=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(Lf(b),Lf(a));b=!0}b||Mf(a,c)}return!0}
function Mf(a,b){var c,d,e;a.xa&&511>a.xa.a.length?(c=a.xa,e=d=0):a.pb&&(c=a.pb,d=c.a.length,e=P(c)?c.A.length:c.h.length);d=[d,0].concat(a.a);Array.prototype.splice.apply(c.a,d);d=null;P(a)?d=a.A:(d=a.h,d.forEach(function(a){a.C=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.A:c.h,d);Gf(a.pb,a.xa);P(c)||Lf(c);-1!=b&&(a.C.a.splice(b,1),a.C.h.splice(b,1))}
m.Ab=function(a,b,c){var d=If(this,a);if(P(this)){if(this.s.Oa(this.a[d],a)){if(c)this.s.X().remove(a,this.s.La()?1:this.A[d].length),this.A[d]=this.s.La()?b:[b];else{if(this.s.La())throw new D(201,this.s.getName(),JSON.stringify(a));if(!pf(this.A[d],b))throw new D(109);}this.s.X().add(a,1);return this}this.a.splice(d,0,a);this.A.splice(d,0,this.s.La()?b:[b]);this.s.X().add(a,1);512==this.a.length?(d=zf(this.s),a=zf(this.s),a.lb=1,a.a=[this.a[256]],a.h=[this,d],a.C=this.C,this.C=a,d.a=this.a.splice(256),
d.A=this.A.splice(256),d.C=a,Gf(d,this.xa),Gf(this,d),d=a):d=this;return d}d=this.s.Oa(this.a[d],a)?d+1:d;a=this.h[d].Ab(a,b,c);P(a)||1!=a.a.length||(this.a.splice(d,0,a.a[0]),a.h[1].C=this,a.h[0].C=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.a.length?Nf(this):this};
function Nf(a){var b=zf(a.s),c=zf(a.s);b.C=a.C;b.lb=a.lb+1;b.a=[a.a[256]];b.h=[a,c];a.a.splice(256,1);c.C=b;c.lb=a.lb;c.a=a.a.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.C=c});a.C=b;Gf(c,a.xa);Gf(a,c);return b}function If(a,b){for(var c=0,d=a.a.length,e=a.s.ib();c<d;){var f=c+d>>1;-1==e.compare(a.a[f],b)?c=f+1:d=f}return c}m.Je=function(a){if(!P(this)){var b=If(this,a);this.s.Oa(this.a[b],a)&&b++;return this.h[b].Je(a)}return this};
m.Ie=function(a){if(!P(this)){var b=If(this,a);this.s.Oa(this.a[b],a)&&(a.some(function(a){return a==F})||b++);return this.h[b].Ie(a)}return this};
m.Sa=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.s.ib(),f=0,h=this.a.length-1,k=this.a,p=d(e.vb(k[f],a)),K=d(e.vb(k[h],a));if(1!=p&&(-1!=p||-1!=K)){var ra=function(a,b){b=a+b>>1;return b==a?b+1:b},ba=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.vb(k[b],a));if(0==h)return b;if(1==h)return-1;h=ra(b,c);if(h==c)return 0==f?c:-1;var p=d(e.vb(k[h],a));return 0==p?ba(b,h,p):-1==p?ba(h+1,c,f):ba(b+1,h,p)},yb=function(b,c){if(b>=c)return b;var f=d(e.vb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=ra(b,c);if(f==c)return b;var h=d(e.vb(k[f],a));return 0==h?yb(f,c):1==h?yb(b,f-1):-1};0!=p&&(f=ba(f+1,h,K));-1!=f&&(h=yb(f,h),-1!=h&&h>=f&&Of(this,b,c,f,h+1))}};function yf(a,b,c,d){if(a.s.La())!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d];else for(var e=0;e<a.A[d].length&&b.count<c.length;++e)!b.reverse&&b.K?b.K--:c[b.count++]=a.A[d][e]}function Of(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)yf(a,b,c,d)}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.A.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.s.La()?1:this.A[c].length,0>a.offset)for(var d=this.A[c].length+a.offset;d<this.A[c].length&&0<a.count;++d)b[a.ne++]=this.A[c][d],a.count--}else if(this.s.La())b[a.ne++]=this.A[c],a.count--;else for(d=0;d<this.A[c].length&&0<a.count;++d)b[a.ne++]=this.A[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Df(a,b){var c=b.X();a=a.map(function(a){var d=new Ef(a.id(),b);d.a=a.l[0];d.A=a.l[1];d.a.forEach(function(a,e){c.add(a,b.La()?1:d.A[e].length)});return d});for(var d=0;d<a.length-1;++d)Gf(a[d],a[d+1]);return 1<a.length?vf(a[0]):a[0]}m.fd=function(a){return this.s.ib().fd(this.a[0],a)};function Pf(a){this.Vc=0==a?Qf:Rf;this.Xd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ce=0==a?Sf:Tf}function Rf(a,b){return a>b?1:a<b?-1:0}function Qf(a,b){return Rf(b,a)}function Tf(a,b){return nd(a,b)}function Sf(a,b){return nd(b,a)}m=Pf.prototype;m.vb=function(a,b){b=this.Xd(b);var c=[b.from==F,b.o==F];if(!c[0]){var d=this.Vc(a,b.from);c[0]=b.ea?1==d:-1!=d}c[1]||(d=this.Vc(a,b.o),c[1]=b.na?-1==d:1!=d);return c};m.compare=function(a,b){return this.Vc(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Bb=function(a,b){a=this.vb(a,b);return a[0]&&a[1]};m.fd=function(a,b){return this.Bb(a,b)};m.nf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ce(a,c)}.bind(this))};m.Sd=function(a){return this.Xd(a).from==F};m.qd=function(a){a=this.Xd(a);return[a.from,a.o]};m.Jd=function(a){return null!==a};m.Ud=l(1);
m.toString=function(){return this.compare==Qf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function Vf(a){Pf.call(this,a);this.Vc=0==a?Wf:Xf}r(Vf,Pf);function Xf(a,b){return null===a?null===b?0:-1:null===b?1:Rf(a,b)}function Wf(a,b){return Xf(b,a)}Vf.prototype.Bb=function(a,b){return null===a?id(b):Vf.gb.Bb.call(this,a,b)};Vf.prototype.Hb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};Vf.prototype.min=function(a,b){var c=this.Hb(a,b);null===c&&(c=Vf.gb.min.call(this,a,b));return c};
Vf.prototype.max=function(a,b){var c=this.Hb(a,b);null===c&&(c=Vf.gb.max.call(this,a,b));return c};function Yf(a){this.pa=a.map(function(a){return new Pf(a)})}function Zf(a,b,c,d){for(var e=0,f=0;f<a.pa.length&&0==e;++f)e=d(a.pa[f],b[f],c[f]);return e}m=Yf.prototype;m.compare=function(a,b){return Zf(this,a,b,function(a,b,e){return b==F||e==F?0:a.compare(b,e)})};m.min=function(a,b){return Zf(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return Zf(this,a,b,function(a,b,e){return a.max(b,e)})};
m.vb=function(a,b){for(var c=[!0,!0],d=0;d<this.pa.length&&(c[0]||c[1]);++d){var e=this.pa[d].vb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Bb=function(a,b){for(var c=!0,d=0;d<this.pa.length&&c;++d)c=this.pa[d].Bb(a[d],b[d]);return c};m.fd=function(a,b){return this.pa[0].Bb(a[0],b[0])};
m.nf=function(a){var b=a.filter(function(a){return a.every(ha)});a=Array(this.pa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.pa[b].ce(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,d=0;d<this.pa.length&&0==c;++d)c=this.pa[d].ce(a[d],b[d]);return c}.bind(this))};m.Sd=function(a){return this.pa[0].Sd(a[0])};
m.qd=function(a){var b=a.map(function(a,b){return this.pa[b].qd(a)[0]},this);a=a.map(function(a,b){return this.pa[b].qd(a)[1]},this);return[b,a]};m.Jd=function(a){return a.every(function(a,c){return this.pa[c].Jd(a)},this)};m.Ud=function(){return this.pa.length};function $f(a){Yf.call(this,a);this.pa=a.map(function(a){return new Vf(a)})}r($f,Yf);function ag(a){if(1==a.f.length)return new Pf(a.f[0].order);var b=a.f.map(function(a){return a.order});return a.f.some(function(a){return a.da.gc()})?new $f(b):new Yf(b)};function bg(a){this.fa=a;this.nb=B();this.Mc=new rf;this.ya=new rf}m=bg.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.nb.add(b),this.Mc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.nb.clear(),this.Mc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.nb.delete(b),this.Mc.remove(a,1)):(this.nb.clear(),this.Mc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?C(this.nb):this.fa.get(a)};m.Xc=function(a){return this.fa.Xc(a)};
m.X=function(){sf(this.ya,[this.fa.X(),this.Mc]);return this.ya};m.Sa=function(a,b,c,d){b=this.fa.Sa(a,b,c,d);return null!=a?b:b.concat(C(this.nb))};m.clear=function(){this.nb.clear();this.fa.clear()};m.jb=function(a){return null===a?0!=this.nb.size:this.fa.jb(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ia=function(){return[new Wb(-2,C(this.nb))].concat(this.fa.Ia())};m.ib=function(){return this.fa.ib()};
function cg(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);d=b[c].l;b=b.slice(0);b.splice(c,1);a=a(b);var e=new bg(a);d.forEach(function(a){e.nb.add(a)});return e}m.La=function(){return this.fa.La()};function dg(a){this.w=a;this.rb=B();this.Z=new Pf(1)}m=dg.prototype;m.getName=g("w");m.add=function(a){if("number"!=typeof a)throw new D(103);this.rb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.rb.delete(a)};m.get=function(a){return this.jb(a)?[a]:[]};m.min=function(){return this.Hb(this.Z.min.bind(this.Z))};m.max=function(){return this.Hb(this.Z.max.bind(this.Z))};
m.Hb=function(a){if(0==this.rb.size)return null;var b=C(this.rb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Xc=function(){return this.rb.size};m.Sa=function(a,b,c,d){var e=a||[ld()];a=C(this.rb).filter(function(a){return e.some(function(b){return this.Z.Bb(a,b)},this)},this);return qf(a,b,c,d)};m.clear=function(){this.rb.clear()};m.jb=function(a){return this.rb.has(a)};m.Ia=function(){return[new Wb(0,C(this.rb))]};m.ib=g("Z");
function eg(a,b){var c=new dg(a);b[0].l.forEach(function(a){c.add(a,a)});return c}m.La=l(!0);m.X=function(){var a=new rf;a.ia=this.rb.size;return a};function fg(a){this.Na=a.b(jc);this.B=a.b(lc);this.U=a.b(kc)}fg.prototype.Da=function(a){var b=a.oa(),c=function(){if(0==b.length)return v();var a=b.shift();return(a.Cb()?gg(this,a):hg(this,a)).then(c)}.bind(this);return c()};function hg(a,b){var c=a.Na.Fb(0,[b]);a=c.G(b.getName(),b.$a.bind(b),0).get([]).then(function(a){this.U.Ub(b.getName(),a);ig(this,b,a)}.bind(a));c.ka();return a}
function ig(a,b,c){var d=a.B.kc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.mb(b.getName());b.add(c,a.id())})})}function gg(a,b){var c=a.Na.Fb(0,[b]),d=c.G(b.getName(),b.$a,0).get([]).then(function(a){this.U.Ub(b.getName(),a)}.bind(a));a=b.Ca().map(function(a){return jg(this,a,c)},a).concat(kg(a,b,c));c.ka();return db(a.concat(d))}
function jg(a,b,c){c=c.G(b.j(),Yb,1);var d=ag(b);return c.get([]).then(function(a){if(0<a.length){if(lg(b)){var c=Cf.bind(void 0,d,b.j(),b.Ac);a=cg(c,a)}else a=Cf(d,b.j(),b.Ac,a);this.B.set(b.lc,a)}}.bind(a))}function kg(a,b,c){return c.G(Ue(b),Yb,1).get([]).then(function(a){0<a.length&&(a=eg(Ue(b),a),this.B.set(b.getName(),a))}.bind(a))};function mg(){this.Y=x();this.kc=x()}mg.prototype.Da=function(a){a.oa().forEach(function(a){var b=[];this.kc.set(a.getName(),b);var d=Ue(a);if(null===this.get(d)){var e=new dg(d);b.push(e);this.Y.set(d,e)}a.Ca().forEach(function(a){var c;c=ag(a);c=new tf(a.j(),c,a.Ac);c=lg(a)&&1==a.f.length?new bg(c):c;b.push(c);this.Y.set(a.j(),c)},this)},this);return v()};mg.prototype.get=function(a){return this.Y.get(a)||null};
mg.prototype.set=function(a,b){var c=this.kc.get(a)||null;null===c&&(c=[],this.kc.set(a,c));a=null;for(var d=0;d<c.length;d++)if(c[d].getName()==b.getName()){a=d;break}null!==a&&0<c.length?c.splice(a,1,b):c.push(b);this.Y.set(b.getName(),b)};function ng(a,b){var c=[],d=null,e=null;Vd(a,function(a){var f=b(a);null==a.getParent()?e=f:L(d,f);var k=a.getParent();null!==k&&J(k).length==J(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<J(a).length&&c.push(f);d=null===a.h?c[c.length-1]:f});return e}function og(a){return pg(a,function(a){return null===a.h})}
function qg(a){var b=a.getParent(),c=0;null!==b&&(c=J(b).indexOf(a),b.removeChild(a));var d=J(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||Sd(b,d,c+f)});return{parent:b,children:d}}function rg(a,b){J(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function sg(a){var b=Rd(a,0);qg(a);rg(b,a);return b}
function tg(a,b,c){var d=Rd(a,0),e=J(d).slice();if(!e.some(function(a){return b(a)}))return a;qg(a);e.forEach(function(e,h){if(b(e)){var f=c(a);Td(d,h);L(f,e);Sd(d,f,h)}});return d}function ug(a,b,c,d){var e=a.getParent();null!==e&&(a=J(e).indexOf(a),Td(e,a),Sd(e,c,a));J(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function pg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||J(a).forEach(d)}var e=[];d(a);return e}
function vg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";Vd(a,function(a){for(var b=0;b<Qd(a);b++)d+="-";d+=c(a)});return d};function wg(a){Wd.call(this);this.ob=a;this.Ta=!1}r(wg,Wd);m=wg.prototype;m.Eb=function(){return ng(this,function(a){if(a instanceof wg){var b=new wg(a.ob);b.Ta=a.Ta;a=a.V();b.ra=a;return b}return a.Eb()})};m.ab=function(a){var b=a||[];Vd(this,function(a){a!=this&&a.ab(b)}.bind(this));a=B(b);return C(a)};m.m=function(a){var b=null!=a?a:B();Vd(this,function(a){a!=this&&a.m(b)}.bind(this));return b};m.Lc=function(a){this.Ta!=a&&(this.Ta=a,this.ob="and"==this.ob?"or":"and",J(this).forEach(function(b){return b.Lc(a)}))};
m.eval=function(a){var b=J(this).map(function(b){return b.eval(a)});return xg(this,b)};function xg(a,b){return"and"==a.ob?wd(b):xd(b)}m.toString=function(){return"combined_pred_"+this.ob.toString()};m.qe=function(){if("or"==this.ob){var a=new pd;J(this).forEach(function(b){b=b.qe().zb();a.add(b)});return a}return new pd};m.gd=function(){return"or"==this.ob?yg(this):!1};
function yg(a){var b=null;return J(a).every(function(a){if(!(a instanceof Yd&&a.gd()))return!1;null===b&&(b=a.I);return b.j()==a.I.j()})};function zg(a,b,c){Wd.call(this);this.ga=a;this.ma=b;this.D=c;this.Yd=null;a=Nd();this.sc=Od(a,this.ga.H(),this.D);this.kg=a.Te.get(this.ga.H())||null}r(zg,Wd);m=zg.prototype;m.Eb=function(){var a=new zg(this.ga,this.ma,this.D),b=this.V();a.ra=b;return a};m.ab=function(a){return null!=a?(a.push(this.ga),a.push(this.ma),a):[this.ga,this.ma]};m.m=function(a){a=null!=a?a:B();a.add(this.ga.G());a.add(this.ma.G());return a};
m.reverse=function(){var a=this.D;switch(this.D){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new zg(this.ma,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.ga);a=H(a,this.ma);return this.sc(b,a)},this);return new G(b,a.m())};m.toString=function(){return"join_pred("+this.ga.j()+" "+this.D+" "+this.ma.j()+")"};
function Ag(a,b,c){var d;-1!=b.m().indexOf(Bd(a.ga.G()))?(d=b,b=c):d=c;if(d.entries.length>b.entries.length){a:{c=a.ga;a.ga=a.ma;a.ma=c;switch(a.D){case "gt":c="lt";break;case "lt":c="gt";break;case "gte":c="lte";break;case "lte":c="gte";break;default:break a}a.D=c;a.sc=Od(Nd(),a.ga.H(),a.D)}return[b,d]}return[d,b]}function Bg(a){var b={};a.ab().forEach(function(a){b[a.getName()]=null});return b}
function Cg(a,b,c){null===a.Yd&&(a.Yd=Bg(a.ma.G()));var d=new zd(new Wb(-1,a.Yd),!1);return Dd(b,c,d,[Bd(a.ma.G())])}
function Dg(a,b,c,d){var e=[b,c];d||(e=Ag(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ga,k=a.ma;d&&(e=c,f=b,h=a.ma,k=a.ga);var p=new Kc,K=[];e.entries.forEach(function(a){var b=String(H(a,h));p.set(b,a)});var ra=e.m(),ba=f.m();f.entries.forEach(function(a){var b=H(a,k),c=String(b);null!==b&&p.has(c)?p.get(c).forEach(function(b){b=Dd(a,ba,b,ra);K.push(b)}):d&&K.push(Cg(this,a,ba))}.bind(a));a=b.m().concat(c.m());return new G(K,a)}
function Eg(a,b,c,d,e){function f(a,b){b=new zd(b,1<ra.length);a=Dd(a,ba,b,ra);K.push(a)}var h=d.$f.G(),k=b,p=c;-1!=b.m().indexOf(Bd(h))&&(k=c,p=b);var K=[],ra=p.m(),ba=k.m();k.entries.forEach(function(a){var b=this.kg(H(a,d.rg)),b=d.index.get(b);0!=b.length&&(d.index.La()?f(a,e.get(b[0])):mf(e,b).forEach(f.bind(null,a)))},a);a=k.m().concat(p.m());return new G(K,a)};function Fg(a,b,c){return null===b?new Yd(a,b,c):n(b.j)?new zg(a,b,c):new Yd(a,b,c)};var Gg={};q("lf.schema.DataStoreType",Gg);Gg.INDEXED_DB=0;Gg.MEMORY=1;Gg.LOCAL_STORAGE=2;Gg.FIREBASE=3;Gg.WEB_SQL=4;Gg.OBSERVABLE_STORE=5;function Hg(a,b,c,d){this.lc=a;this.name=b;this.Ac=c;this.f=d}Hg.prototype.j=function(){return this.lc+"."+this.name};function lg(a){return a.f.some(function(a){return a.da.gc()})}function Q(a,b,c,d){this.w=a;this.sa=c;this.J=b;this.nd=d;this.Ja=null}q("lf.schema.Table",Q);Q.prototype.getName=g("w");Q.prototype.getName=Q.prototype.getName;
function Bd(a){return a.Ja||a.w}Q.prototype.pc=function(a){var b=new this.constructor(this.w);b.Ja=a;b.Dg=this.Dg;return b};Q.prototype.as=Q.prototype.pc;Q.prototype.kb=fa;Q.prototype.createRow=Q.prototype.kb;Q.prototype.$a=fa;Q.prototype.deserializeRow=Q.prototype.$a;Q.prototype.Ca=g("sa");Q.prototype.getIndices=Q.prototype.Ca;Q.prototype.ab=g("J");Q.prototype.getColumns=Q.prototype.ab;Q.prototype.xb=fa;Q.prototype.getConstraint=Q.prototype.xb;Q.prototype.Cb=g("nd");Q.prototype.persistentIndex=Q.prototype.Cb;
function Ue(a){return a.w+".#"};function R(a,b){this.child=a;this.Lb=b;this.Ja=null}m=R.prototype;m.getName=function(){return this.Lb+"("+this.child.getName()+")"};m.j=function(){return this.Lb+"("+this.child.j()+")"};m.G=function(){return this.child.G()};m.toString=function(){return this.j()};m.H=function(){return this.child.H()};m.Ca=function(){return[]};m.Ba=l(null);m.gc=l(!1);m.pc=function(a){this.Ja=a;return this};R.prototype.as=R.prototype.pc;
function Ig(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function Jg(a){this.Ja=a||null;this.S=new Q("#UnknownTable",[],[],!1)}m=Jg.prototype;m.getName=l("*");m.j=function(){return this.getName()};m.toString=function(){return this.j()};m.G=g("S");m.H=l(4);m.Ca=function(){return[]};m.Ba=l(null);m.gc=l(!1);q("lf.fn.avg",function(a){return new R(a,"AVG")});function Kg(a){return new R(a||new Jg,"COUNT")}q("lf.fn.count",Kg);function Lg(a){return new R(a,"DISTINCT")}q("lf.fn.distinct",Lg);q("lf.fn.max",function(a){return new R(a,"MAX")});q("lf.fn.min",function(a){return new R(a,"MIN")});q("lf.fn.stddev",function(a){return new R(a,"STDDEV")});q("lf.fn.sum",function(a){return new R(a,"SUM")});q("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){I.call(this);this.Qf=b}r(S,I);S.prototype.ba=fa;S.prototype.exec=function(a,b){switch(this.Qf){case 1:return Mg(this,a,b);case 0:return Ng(this,a,b);default:return Og(this,a,b)}};S.prototype.toString=l("dummy_node");S.prototype.Nc=function(){return this.toString()};function Og(a,b,c){return new u(function(a){a(this.ba([],b,c))}.bind(a))}function Mg(a,b,c){return Rd(a,0).exec(b,c).then(function(a){return this.ba(a,b,c)}.bind(a))}
function Ng(a,b,c){var d=J(a).map(function(a){return a.exec(b,c)});return db(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ba(d,b,c)}.bind(a))};function Pg(a){S.call(this,0,1);this.xe=a}r(Pg,S);Pg.prototype.toString=function(){return"aggregation("+this.xe.map(function(a){return a.j()}).toString()+")"};Pg.prototype.ba=function(a){a.forEach(function(a){Qg(new Rg(a,this.xe))},this);return a};function Rg(a,b){this.Ma=a;this.J=b}
function Qg(a){a.J.forEach(function(a){a=Ig(a).reverse();for(var b=1;b<a.length;b++){var d=a[b],e=Ig(d).slice(-1)[0],f=d.child instanceof R?td(this.Ma,d.child):this.Ma;if(null!==f.Ya&&f.Ya.has(d.j()))break;f=Sg(d.Lb,f,e);e=this.Ma;null===e.Ya&&(e.Ya=x());e.Ya.set(d.j(),f)}},a)}
function Sg(a,b,c){var d=null;switch(a){case "MIN":d=Tg(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=Tg(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=Ug(b,c);break;case "COUNT":d=Vg(b,c);break;case "SUM":d=Wg(b,c);break;case "AVG":a=Vg(b,c);0<a&&(d=Wg(b,c)/a);break;case "GEOMEAN":d=Xg(b,c);break;default:d=Yg(b,c)}return d}function Tg(a,b,c){return a.entries.reduce(function(a,e){e=H(e,b);return null===e?a:null===a?e:c(a,e)},null)}
function Vg(a,b){return b instanceof Jg?a.entries.length:a.entries.reduce(function(a,d){return a+(null===H(d,b)?0:1)},0)}function Wg(a,b){return Tg(a,b,function(a,b){return b+a})}function Yg(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:sb.apply(null,c)}function Xg(a,b){var c=0;a=a.entries.reduce(function(a,e){e=H(e,b);if(0==e||null===e)return a;c++;return a+Math.log(e)},0);return 0==c?null:Math.pow(Math.E,a/c)}
function Ug(a,b){var c=x();a.entries.forEach(function(a){var d=H(a,b);c.set(d,a)});return new G(y(c),a.m())};function Zg(a,b){this.Ga=a;this.aa=b}Zg.prototype.bb=g("Ga");Zg.prototype.ca=g("aa");function $g(){I.call(this)}r($g,I);function ah(a,b){I.call(this);this.table=a;this.values=b}r(ah,$g);function bh(a,b){ah.call(this,a,b)}r(bh,ah);function ch(a){I.call(this);this.table=a}r(ch,$g);ch.prototype.toString=function(){return"delete("+this.table.getName()+")"};function dh(a){I.call(this);this.table=a}r(dh,$g);dh.prototype.toString=function(){return"update("+this.table.getName()+")"};
function eh(a){I.call(this);this.N=a}r(eh,$g);eh.prototype.toString=function(){return"select("+this.N.toString()+")"};function fh(a){I.call(this);this.table=a}r(fh,$g);fh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ja||(a+=" as "+this.table.Ja);return a+")"};function gh(){I.call(this)}r(gh,$g);gh.prototype.toString=l("cross_product");function hh(a,b){I.call(this);this.f=a;this.Nb=b}r(hh,$g);
hh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function ih(a){I.call(this);this.M=a}r(ih,$g);ih.prototype.toString=function(){return"order_by("+ie(this.M)+")"};function jh(a){I.call(this);this.f=a}r(jh,$g);jh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function kh(a){I.call(this);this.f=a}r(kh,$g);
kh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function lh(a){I.call(this);this.W=a}r(lh,$g);lh.prototype.toString=function(){return"limit("+this.W+")"};function mh(a){I.call(this);this.K=a}r(mh,$g);mh.prototype.toString=function(){return"skip("+this.K+")"};function nh(a,b){I.call(this);this.N=a;this.Pb=b}r(nh,$g);nh.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", "+this.N.toString()+")"};function oh(){}oh.prototype.Wa=fa;function ph(){}r(ph,oh);ph.prototype.Wa=function(a){this.F=a;this.tb(this.F);return this.F};ph.prototype.tb=function(a){if(a instanceof eh){var b=qh(this,a.N),b=rh(this,b);ug(a,a,b[0],b[1]);a==this.F&&(this.F=b[0]);a=b[0]}J(a).forEach(function(a){this.tb(a)},this)};function qh(a,b){if(0==J(b).length||"and"!=b.ob)return[b];a=J(b).slice().map(function(a){b.removeChild(a);return qh(this,a)},a);return Ea(a)}
function rh(a,b){var c=null,d=null;b.map(function(a,b){a=new eh(a);0==b?c=a:L(d,a);d=a},a);return[c,d]};function sh(){}r(sh,oh);sh.prototype.Wa=function(a,b){if(3>b.from.length)return a;this.F=a;this.tb(this.F);return this.F};sh.prototype.tb=function(a){if(a instanceof gh)for(;2<J(a).length;){for(var b=new gh,c=0;2>c;c++){var d=Td(a,0);L(b,d)}Sd(a,b,0)}J(a).forEach(function(a){this.tb(a)},this)};function th(){S.call(this,0,0)}r(th,S);th.prototype.toString=l("cross_product");th.prototype.ba=function(a){var b=a[0],c=a[1];a=[];for(var d=b.m(),e=c.m(),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=Dd(b.entries[f],d,c.entries[h],e);a.push(k)}b=b.m().concat(c.m());return[new G(a,b)]};function uh(a,b){le.call(this,a,b);this.Ha=a.b(nc);this.Ib=a.b(oc)}r(uh,le);uh.prototype.getPriority=l(2);uh.prototype.ae=function(a){0==this.H()?vh(this,a):this.Jc()};function vh(a,b){a.pd.forEach(function(a,d){a instanceof he&&oe(this.Ib,a,b[d])},a)}uh.prototype.Jc=function(){var a=qe(this.Ib,this.ca());0!=a.length&&(a=new ne(this.global,a),re(this.Ha,a))};function wh(a){be.call(this,a)}r(wh,be);wh.prototype.ca=function(){var a=B();a.add(this.from);xh(this,this.from.getName(),a);return a};function xh(a,b,c){var d=yh(a.da.info(),b,1);yh(a.da.info(),b).forEach(c.add.bind(c));d.forEach(function(a){xh(this,a.getName(),c)},a)}wh.prototype.clone=function(){var a=new wh(this.da);fe(a,this);a.from=this.from;return a};wh.prototype.bind=function(a){wh.gb.bind.call(this,a);ge(this,a);return this};function zh(a){be.call(this,a)}r(zh,be);zh.prototype.ca=function(){var a=B();a.add(this.Ka);var b=this.da.info();Ah(this.Ka.getName(),b.af).forEach(a.add.bind(a));this.Zb&&yh(b,this.Ka.getName()).forEach(a.add.bind(a));return a};zh.prototype.clone=function(){var a=new zh(this.da);fe(a,this);a.Ka=this.Ka;this.values&&(a.values=this.values instanceof Ed?this.values:this.values.slice());a.Zb=this.Zb;a.$b=this.$b;return a};
zh.prototype.bind=function(a){zh.gb.bind.call(this,a);this.$b&&(this.values=this.$b instanceof Ed?a[this.$b.Ba()]:this.$b.map(function(b){return b instanceof Ed?a[b.Ba()]:b}));return this};function Bh(a){be.call(this,a)}r(Bh,be);Bh.prototype.ca=function(){var a=B();a.add(this.table);var b=this.set.map(function(a){return a.I.j()}),c=this.da.info();Ch(c,b).forEach(a.add.bind(a));Dh(c,b).forEach(a.add.bind(a));return a};Bh.prototype.clone=function(){var a=new Bh(this.da);fe(a,this);a.table=this.table;a.set=this.set?Eh(this.set):this.set;return a};Bh.prototype.bind=function(a){Bh.gb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Rc&&(b.value=a[b.Rc])});ge(this,a);return this};
function Eh(a){return a.map(function(a){var b={},d;for(d in a)b[d]=a[d];return b})};function Fh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+$b(b)+"'";default:return"'"+b.toString()+"'"}}function Gh(a,b){var c=a.Zb?"INSERT OR REPLACE":"INSERT",d=a.Ka.ab(),c=c+(" INTO "+a.Ka.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var e=d.map(function(c){var d=a.l[c.getName()];return b?null!=d?"#":"NULL":Fh(c.H(),d)});return c+e.join(", ")+");"}).join("\n")}
function Hh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Ih(a,b,c,d){return a instanceof Ed?"?"+a.Ba().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Fh(c,a)}).join(", ")+")":"between"==b?Fh(c,a[0])+" AND "+Fh(c,a[1]):Fh(c,a).toString()}
function Jh(a,b){return J(a).map(function(a){return"("+Kh(a,b)+")"}).join("and"==a.ob?" AND ":" OR ")}function Lh(a){return[a.ga.j(),Hh(a.D),a.ma.j()].join(" ")}function Kh(a,b){if(a instanceof Yd){var c=a.I.j(),d=Hh(a.D);a=Ih(a.value,a.D,a.I.H(),b);return"="==d&&"NULL"==a?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==a?[c,"IS NOT NULL"].join(" "):[c,d,a].join(" ")}if(a instanceof wg)return Jh(a,b);if(a instanceof zg)return Lh(a);throw new D(357,typeof a);}
function Mh(a,b){return(a=Kh(a,b))?" WHERE "+a:""}function Nh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.I.j()+" = ";return-1!=a.Rc?b+"?"+a.Rc.toString():b+Fh(a.I.H(),a.value).toString()}).join(", ");a.u&&(c+=Mh(a.u,b));return c+";"}
function Oh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Ja?a.j()+" AS "+a.Ja:a.j()}).join(", "));c="SELECT "+c+" FROM ";null!=a.eb&&0!=a.eb.size?c+=Ph(a,b):(c+=a.from.map(Qh).join(", "),a.u&&(c+=Mh(a.u,b)));a.M&&(b=a.M.map(function(a){return a.I.j()+(0==a.order?" DESC":" ASC")}).join(", "),c+=" ORDER BY "+b);a.qa&&(b=a.qa.map(function(a){return a.j()}).join(", "),c+=" GROUP BY "+b);a.W&&(c+=" LIMIT "+a.W.toString());a.K&&(c+=" SKIP "+a.K.toString());return c+";"}
function Qh(a){return Bd(a)!=a.getName()?a.getName()+" AS "+Bd(a):a.getName()}function Ph(a,b){for(var c=pg(a.u,function(a){return a instanceof zg}),d=c.map(Lh),e=Qh(a.from[0]),f=1;f<a.from.length;f++)var h=Qh(a.from[f]),e=a.eb.has(c[d.length-f].V())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");a=Rd(a.u,0);a instanceof zg||(e+=" WHERE "+Kh(a,b));return e}
function Rh(a,b){b=b||!1;a=a.query.clone();if(a instanceof zh)return Gh(a,b);if(a instanceof wh){var c="DELETE FROM "+a.from.getName();a.u&&(c+=Mh(a.u,b));return c+";"}if(a instanceof Bh)return Nh(a,b);if(a instanceof he)return Oh(a,b);throw new D(358,typeof a);};function T(a,b){this.global=a;this.Cg=a.b(mc);this.Ha=a.b(nc);this.query=b}q("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.Za()}catch(a){return ab(a)}return new u(function(a,b){var c=new uh(this.global,[this.yc()]);re(this.Ha,c).then(function(b){a(rd(b[0]))},b)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Sf=function(){var a=function(a){return a.Nc(this.query)+"\n"}.bind(this);return vg(Sh(this).bb(),a)};T.prototype.explain=T.prototype.Sf;
T.prototype.bind=function(a){this.query.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.Lg=function(a){return Rh(this,a)};T.prototype.toSql=T.prototype.Lg;T.prototype.Za=aa();function Sh(a){if(null==a.bf){var b;b=a.Cg;var c=a.query,d=b.ng.create(c);b=b.zg.create(d,c);a.bf=b}return a.bf}T.prototype.yc=function(){return{context:this.query.clone(),de:Sh(this)}};function Th(a){T.call(this,a,new wh(a.b(A)))}r(Th,T);q("lf.query.DeleteBuilder",Th);Th.prototype.from=function(a){if(null!=this.query.from)throw new D(515);this.query.from=a;return this};Th.prototype.from=Th.prototype.from;Th.prototype.u=function(a){this.Ad();this.query.u=a;return this};Th.prototype.where=Th.prototype.u;Th.prototype.Ad=function(){if(null==this.query.from)throw new D(548);if(null!=this.query.u)throw new D(516);};
Th.prototype.Za=function(){Th.gb.Za.call(this);if(null==this.query.from)throw new D(517);};function Uh(a,b){T.call(this,a,new zh(a.b(A)));this.query.Zb=b||!1}r(Uh,T);q("lf.query.InsertBuilder",Uh);Uh.prototype.Za=function(){Uh.gb.Za.call(this);var a=this.query;if(null==a.Ka||null==a.values)throw new D(518);if(a.Zb&&null===a.Ka.xb().od)throw new D(519);};Uh.prototype.Ka=function(a){if(null!=this.query.Ka)throw new D(520);this.query.Ka=a;return this};Uh.prototype.into=Uh.prototype.Ka;
Uh.prototype.values=function(a){if(null!=this.query.values)throw new D(521);a instanceof Ed||a.some(function(a){return a instanceof Ed})?this.query.$b=a:this.query.values=a;return this};Uh.prototype.values=Uh.prototype.values;function Vh(a){return Wh("and",Array.prototype.slice.call(arguments))}q("lf.op.and",Vh);q("lf.op.or",function(a){return Wh("or",Array.prototype.slice.call(arguments))});function Wh(a,b){var c=new wg(a);b.forEach(function(a){L(c,a)});return c}q("lf.op.not",function(a){a.Lc(!0);return a});function U(a,b){T.call(this,a,new he(a.b(A)));this.He=this.vd=!1;this.query.f=b;Xh(this);Yh(this)}r(U,T);q("lf.query.SelectBuilder",U);U.prototype.Za=function(){U.gb.Za.call(this);var a=this.query;if(null==a.from)throw new D(522);if(n(a.Qb)&&!n(a.W)||n(a.Wb)&&!n(a.K))throw new D(523);null!=this.query.qa?Zh(this):$h(this)};function Xh(a){var b=a.query.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Lb},a);if(0!=b.length&&(1!=b.length||1!=a.query.f.length))throw new D(524);}
function Zh(a){if(a.query.qa.some(function(a){a=a.H();return 6==a||0==a}))throw new D(525);}function $h(a){var b=a.query.f.some(function(a){return a instanceof R},a);a=a.query.f.some(function(a){return!(a instanceof R)},a)||0==a.query.f.length;if(b&&a)throw new D(526);}function Yh(a){a.query.f.forEach(function(a){if(a instanceof R&&!ai(a.Lb,a.H()))throw new D(527,a.j());},a)}function bi(a,b){if(null==a.query.from)throw new D(b);}
U.prototype.from=function(a){if(this.He)throw new D(515);this.He=!0;null==this.query.from&&(this.query.from=[]);this.query.from.push.apply(this.query.from,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.from;U.prototype.u=function(a){bi(this,548);if(this.vd)throw new D(516);this.vd=!0;ci(this,a);return this};U.prototype.where=U.prototype.u;function ci(a,b){null!=a.query.u&&(b=Vh(b,a.query.u));a.query.u=b}
U.prototype.dg=function(a,b){bi(this,542);if(this.vd)throw new D(547);this.query.from.push(a);ci(this,b);return this};U.prototype.innerJoin=U.prototype.dg;U.prototype.lg=function(a,b){bi(this,542);if(!(b instanceof zg))throw new D(541);if(this.vd)throw new D(547);this.query.from.push(a);null==this.query.eb&&(this.query.eb=B());var c=b;Bd(a)!=Bd(b.ma.G())&&(c=b.reverse());this.query.eb.add(c.V());ci(this,c);return this};U.prototype.leftOuterJoin=U.prototype.lg;
U.prototype.W=function(a){if(null!=(this.query.W||this.query.Qb))throw new D(528);if(a instanceof Ed)this.query.Qb=a;else{if(0>a)throw new D(531);this.query.W=a}return this};U.prototype.limit=U.prototype.W;U.prototype.K=function(a){if(null!=(this.query.K||this.query.Wb))throw new D(529);if(a instanceof Ed)this.query.Wb=a;else{if(0>a)throw new D(531);this.query.K=a}return this};U.prototype.skip=U.prototype.K;
U.prototype.M=function(a,b){bi(this,549);null==this.query.M&&(this.query.M=[]);this.query.M.push({I:a,order:null!=b?b:1});return this};U.prototype.orderBy=U.prototype.M;U.prototype.qa=function(a){bi(this,549);if(null!=this.query.qa)throw new D(530);null==this.query.qa&&(this.query.qa=[]);this.query.qa.push.apply(this.query.qa,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.qa;
function ai(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}U.prototype.clone=function(){var a=new U(this.global,this.query.f);a.query=this.query.clone();a.query.Uc=null;return a};U.prototype.clone=U.prototype.clone;function di(a,b){T.call(this,a,new Bh(a.b(A)));this.query.table=b}r(di,T);q("lf.query.UpdateBuilder",di);di.prototype.set=function(a,b){a={Rc:b instanceof Ed?b.Ba():-1,I:a,value:b};null!=this.query.set?this.query.set.push(a):this.query.set=[a];return this};di.prototype.set=di.prototype.set;di.prototype.u=function(a){this.Ad();this.query.u=a;return this};di.prototype.where=di.prototype.u;di.prototype.Ad=function(){if(null!=this.query.u)throw new D(516);};
di.prototype.Za=function(){di.gb.Za.call(this);if(null==this.query.set)throw new D(532);if(this.query.set.some(function(a){return a.value instanceof Ed}))throw new D(501);};function ei(a){this.query=a;this.Ga=null}ei.prototype.fc=function(){null===this.Ga&&(this.Ga=this.wc());return this.Ga};ei.prototype.wc=fa;function fi(a){ei.call(this,a)}r(fi,ei);fi.prototype.wc=function(){return this.query.Zb?new bh(this.query.Ka,this.query.values):new ah(this.query.Ka,this.query.values)};function gi(a){ei.call(this,a)}r(gi,ei);
gi.prototype.wc=function(){var a=new dh(this.query.table),b=null!=this.query.u?new eh(this.query.u.Eb()):null,c=new fh(this.query.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function hi(a,b,c){this.Ga=a;this.fe=b;this.Tb=c}hi.prototype.fc=function(){this.Tb.forEach(function(a){this.Ga=a.Wa(this.Ga,this.fe)},this);return this.Ga};function ii(a,b){ei.call(this,a);this.Tb=b}r(ii,ei);ii.prototype.wc=function(){var a=new ch(this.query.from),b=null!=this.query.u?new eh(this.query.u.Eb()):null,c=new fh(this.query.from);null===b?L(a,c):(L(b,c),L(a,b));return(new hi(a,this.query,this.Tb)).fc()};function ji(){}r(ji,oh);ji.prototype.Wa=function(a,b){if(2>b.from.length)return a;this.F=a;this.tb(this.F,b);return this.F};ji.prototype.tb=function(a,b){if(a instanceof eh&&a.N instanceof zg){var c=a.N.V(),d=Rd(a,0);d instanceof gh&&(c=null!=b.eb&&b.eb.has(c),c=new nh(a.N,c),ug(a,d,c,c),a==this.F&&(this.F=c),a=c)}J(a).forEach(function(a){this.tb(a,b)},this)};function ki(){this.Qc=B()}r(ki,oh);ki.prototype.Wa=function(a,b){if(!n(b.u))return a;this.Qc.clear();this.F=a;this.tb(this.F,b);this.Qc.clear();return this.F};ki.prototype.tb=function(a,b){var c=function(a){J(a).forEach(d)}.bind(this),d=function(a){if(!this.Qc.has(a)){if(a instanceof eh){var e=a.N.m(),h=function(a){return li(this,a,e)}.bind(this),h=mi(this,b,a,h);this.Qc.add(a);h!=a&&(null===h.getParent()&&(this.F=h),d(h))}c(a)}}.bind(this);d(a)};
function mi(a,b,c,d){var e=c;if(ni(b,c))e=sg(c),mi(a,b,c,d);else if(oi(c)){var f=[],e=tg(c,d,function(a){a=new eh(a.N);f.push(a);return a});f.forEach(function(a){mi(this,b,a,d)},a)}return e}function li(a,b,c){var d=B();og(b).forEach(function(a){d.add(a.table)},a);b instanceof fh&&d.add(b.table);return pc(d,c)}function oi(a){a=Rd(a,0);return a instanceof gh||a instanceof nh}
function ni(a,b){var c=Rd(b,0);if(!(c instanceof eh))return!1;if(null==a.eb)return!0;b=b.N instanceof zg;a=a.eb.has(c.N.V());return b||!a};function pi(a,b){ei.call(this,a);this.Tb=b;this.df=this.Xe=this.mf=this.$e=this.ye=this.Me=this.lf=this.Ee=this.pf=null}r(pi,ei);
pi.prototype.wc=function(){qi(this);2<=this.query.from.length&&(this.Ee=new gh);this.lf=null!=this.query.u?new eh(this.query.u.Eb()):null;this.query.M&&(this.$e=new ih(this.query.M));null!=this.query.K&&0<this.query.K&&(this.mf=new mh(this.query.K));null!=this.query.W&&(this.Xe=new lh(this.query.W));null!=this.query.qa&&(this.Me=new kh(this.query.qa));ri(this);this.df=new hh(this.query.f||[],this.query.qa||null);var a=si(this);return(new hi(a,this.query,this.Tb)).fc()};
function si(a){for(var b=[a.Xe,a.mf,a.df,a.$e,a.ye,a.Me,a.lf,a.Ee],c=-1,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.pf.forEach(function(a){L(b[c],a)});return d}function qi(a){a.pf=a.query.from.map(function(a){return new fh(a)},a)}function ri(a){var b=a.query.f.filter(function(a){return a instanceof R});null!=a.query.M&&a.query.M.forEach(function(a){a.I instanceof R&&b.push(a.I)});0<b.length&&(a.ye=new jh(b))};function ti(){this.le=[new ph,new sh,new ki,new ji];this.Kd=[new ph]}ti.prototype.create=function(a){var b;if(a instanceof zh)b=new fi(a);else if(a instanceof wh)b=new ii(a,this.Kd);else if(a instanceof he)b=new pi(a,this.le);else if(a instanceof Bh)b=new gi(a);else throw new D(513);b=b.fc();return new Zg(b,a.ca())};function ui(a){S.call(this,0,1);this.S=a}r(ui,S);ui.prototype.toString=function(){return"delete("+this.S.getName()+")"};ui.prototype.ba=function(a,b){a=a[0].entries.map(function(a){return a.ua});b.remove(this.S,a);return[vd()]};function vi(a,b){S.call(this,0,-1);this.table=b;this.B=a.b(lc)}r(vi,S);vi.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};vi.prototype.ba=function(){var a=this.B.get(Ue(this.table)),b=new G([],[this.table.getName()]),c=Kg(),a=a.X().ia;null===b.Ya&&(b.Ya=x());b.Ya.set(c.j(),a);return[b]};function wi(a,b){S.call(this,0,-1);this.U=a.b(kc);this.B=a.b(lc);this.table=b}r(wi,S);wi.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ja||(a+=" as "+this.table.Ja);return a+")"};wi.prototype.ba=function(){var a=this.B.get(Ue(this.table)).Sa();return[yd(mf(this.U,a),[Bd(this.table)])]};function xi(a){this.c=a}r(xi,oh);xi.prototype.Wa=function(a,b){this.F=a;if(!this.Cd(b))return a;a=pg(a,function(a){return a instanceof wi})[0];b=new vi(this.c,a.table);ug(a,a,b,b);return this.F};xi.prototype.Cd=function(a){return 1==a.f.length&&1==a.from.length&&null==a.u&&null==a.W&&null==a.K&&null==a.qa?(a=a.f[0],a instanceof R&&"COUNT"==a.Lb&&a.child instanceof Jg):!1};function yi(a){S.call(this,0,1);this.Le=a}r(yi,S);yi.prototype.toString=function(){return"groupBy("+this.Le.map(function(a){return a.j()}).toString()+")"};yi.prototype.ba=function(a){return zi(this,a[0])};function zi(a,b){var c=new Kc,d=function(a){return this.Le.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),b.m())},a)};function Ai(a,b,c){S.call(this,0,0);this.B=a.b(lc);this.U=a.b(kc);this.N=b;this.Pb=c;this.yd="eq"==this.N.D?0:2;this.Oe=null}r(Ai,S);var Bi=["hash","index_nested_loop","nested_loop"];Ai.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", impl: "+Bi[this.yd]+", "+this.N.toString()+")"};
Ai.prototype.ba=function(a){switch(this.yd){case 0:return[Dg(this.N,a[0],a[1],this.Pb)];case 1:return[Eg(this.N,a[0],a[1],this.Oe,this.U)];default:var b=this.N,c=a[0];a=a[1];var d=this.Pb,e=[c,a];d||(e=Ag(b,c,a));c=e[0];a=e[1];for(var e=[],f=c.m(),h=a.m(),k=c.entries.length,p=a.entries.length,K=p+256-1>>8,ra=0;ra<K;){for(var ba=0;ba<k;ba++){var yb=!1,Uf=H(c.entries[ba],b.ga);if(null!==Uf)for(var Di=Math.min(ra+1<<8,p),zb=ra<<8;zb<Di;zb++)if(b.sc(Uf,H(a.entries[zb],b.ma))){var yb=!0,Pc=Dd(c.entries[ba],
f,a.entries[zb],h);e.push(Pc)}d&&!yb&&e.push(Cg(b,c.entries[ba],f))}ra++}b=c.m().concat(a.m());return[new G(e,b)]}};function Ci(a,b){a.yd=1;var c=a.B.get(b.Ba().j());a.Oe={$f:b,rg:b==a.N.ga?a.N.ma:a.N.ga,index:c}};function Ei(a){S.call(this,0,-1);this.ef=a}r(Ei,S);Ei.prototype.toString=function(){return"no_op_step("+this.ef[0].m().join(",")+")"};Ei.prototype.ba=g("ef");function Fi(){}r(Fi,oh);Fi.prototype.Wa=function(a,b){this.F=a;if(!this.Cd(b))return a;pg(a,function(a){return a instanceof Ai}).forEach(this.Bg,this);return this.F};Fi.prototype.Cd=function(a){return 1<a.from.length};
Fi.prototype.Bg=function(a){if("eq"==a.N.D&&!a.Pb){var b=function(b){if(!(b instanceof wi))return null;b=Bd(b.table)==Bd(a.N.ma.G())?a.N.ma:a.N.ga;return null===b.Ba()?null:b},c=b(Rd(a,0)),b=b(Rd(a,1));if(null!==c||null!==b){b=null===b?c:b;Ci(a,b);var d=new G([],[Bd(b.G())]);Ud(a,new Ei([d]),b==c?0:1)}}};function Gi(a){a=a.map(function(a){return a.zb()});a=xb.apply(null,a);var b=[];wb(a,function(a){b.push(a)});return b}function Hi(a){this.Ob=a}Hi.prototype.Zc=function(){return 1==this.Ob.f.length?[ld()]:[this.Ob.f.map(function(){return ld()})]};function Ii(a,b){this.Ob=a;this.Fa=b;this.Gd=this.Ve=null}
function Ji(a,b){var c=x();a.Fa.keys().forEach(function(a){var d=this.Fa.get(a).map(function(a){return ce(b,a)},this),f=new pd([ld()]);d.forEach(function(a){f=qd(f,a.qe())});c.set(a,f)},a);return c}Ii.prototype.Zc=function(a){if(this.Ve==a)return this.Gd;for(var b=Ji(this,a),c=this.Ob.f.length-1;0<=c;c--){var d=this.Ob.f[c];if(null!==(b.get(d.da.getName())||null))break;b.set(d.da.getName(),new pd([ld()]))}this.Gd=1==this.Ob.f.length?y(b)[0].zb():Gi(Ki(this,b));this.Ve=a;return this.Gd};
function Ki(a,b){var c=x(),d=0;a.Ob.f.forEach(function(a){c.set(a.da.getName(),d);d++});return Vb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Li(a,b){this.sd=b;this.B=a.b(lc)}function Mi(a){a=a.B.get(Ue(a.sd));return Math.floor(.02*a.X().ia)}function Ni(a,b,c){c=c.filter(a.gg,a);if(0==c.length)return null;a=Oi(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var e=Pi(c,b);return e<d?(d=e,c):a},null)}
function Oi(a,b){return a.sd.Ca().map(function(a){a=new Qi(this.B,a);Ri(a,b);return a},a).filter(function(a){if(null===a.Fa)a=!1;else{for(var b=!1,c=!0,f=0;f<a.cb.f.length;f++){var h=a.Fa.has(a.cb.f[f].da.getName());if(b&&h){c=!1;break}h||(b=!0)}a=c}return a})}Li.prototype.gg=function(a){return a instanceof Yd?!a.gd()||a.I.G()!=this.sd||"in"==a.D&&a.value.length>Mi(this)?!1:!0:a instanceof wg?a.gd()&&Rd(a,0).I.G()==this.sd?J(a).length<=Mi(this):!1:!1};
function Qi(a,b){this.B=a;this.cb=b;this.ag=B(this.cb.f.map(function(a){return a.da.getName()}));this.Vd=this.Fa=null}function Si(a){null===a.Vd&&(a.Vd=new Ii(a.cb,a.Fa));return a.Vd}function Ri(a,b){b.forEach(function(a){var b=a.ab()[0].getName();this.ag.has(b)&&(null===this.Fa&&(this.Fa=new Kc),this.Fa.set(b,a.V()))},a)}function Pi(a,b){b=Si(a).Zc(b);var c=a.B.get(a.cb.j());return b.reduce(function(a,b){return a+c.Xc(b)},0)};function Ti(a,b,c,d){S.call(this,0,-1);this.B=a.b(lc);this.index=b;this.Ue=c;this.je=d;this.Pc=this.Oc=!1}r(Ti,S);Ti.prototype.toString=function(){return"index_range_scan("+this.index.j()+", ?, "+(this.je?"reverse":"natural")+(this.Oc?", limit:?":"")+(this.Pc?", skip:?":"")+")"};Ti.prototype.Nc=function(a){var b=this.toString(),c=this.Ue.Zc(a),b=b.replace("?",c.toString());this.Oc&&(b=b.replace("?",a.W.toString()));this.Pc&&(b=b.replace("?",a.K.toString()));return b};
Ti.prototype.ba=function(a,b,c){a=this.Ue.Zc(c);b=this.B.get(this.index.j());c=(1==a.length&&a[0]instanceof E&&md(a[0])?qf(b.get(a[0].from),!1,this.Oc?c.W:void 0,this.Pc?c.K:void 0):b.Sa(a,this.je,this.Oc?c.W:void 0,this.Pc?c.K:void 0)).map(function(a){return new Wb(a,{})},this);return[yd(c,[this.index.lc])]};function Ui(){S.call(this,0,0)}r(Ui,S);Ui.prototype.toString=l("multi_index_range_scan()");
Ui.prototype.ba=function(a){var b=x();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.ua.id(),a)})});var c=y(b);return[new G(c,a[0].m())]};function Vi(a){S.call(this,0,1);this.ic=a}r(Vi,S);Vi.prototype.toString=l("select(?)");Vi.prototype.Nc=function(a){a=ce(a,this.ic);return this.toString().replace("?",a.toString())};Vi.prototype.ba=function(a,b,c){return[ce(c,this.ic).eval(a[0])]};function Wi(a,b){S.call(this,0,1);this.U=a.b(kc);this.S=b}r(Wi,S);Wi.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};Wi.prototype.ba=function(a){return[yd(mf(this.U,sd(a[0])),[Bd(this.S)])]};function Xi(a){this.c=a}r(Xi,oh);Xi.prototype.Wa=function(a,b){this.F=a;pg(a,function(a){return a instanceof wi}).forEach(function(a){var c=Yi(a);if(0!=c.length){var e=Ni(new Li(this.c,a.table),b,c.map(function(a){return ce(b,a.ic)}));if(null!==e){var f=x();c.forEach(function(a){f.set(a.ic,a)},this);this.F=Zi(this,e,f,a)}}},this);return this.F};function Yi(a){var b=[];for(a=a.getParent();a;){if(a instanceof Vi)b.push(a);else if(a instanceof Ai)break;a=a.getParent()}return b}
function Zi(a,b,c,d){(null===b.Fa?[]:b.Fa.values()).map(function(a){return c.get(a)}).forEach(qg);b=new Ti(a.c,b.cb,Si(b),!1);a=new Wi(a.c,d.table);L(a,b);ug(d,d,a,b);return b.bb()};function $i(a,b){S.call(this,0,-1);this.B=a.b(lc);this.S=b}r($i,S);$i.prototype.toString=function(){return"insert("+this.S.getName()+")"};$i.prototype.ba=function(a,b,c){aj(this.S,c.values,this.B);b.Ab(this.S,c.values);return[yd(c.values,[this.S.getName()])]};function aj(a,b,c){a=a.xb().od;if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].da.getName();c=c.get(a.j()).X().Cc;var e=null===c?0:c;b.forEach(function(a){if(0==a.l[d]||null==a.l[d])e++,a.l[d]=e})}}
function bj(a,b){S.call(this,0,-1);this.B=a.b(lc);this.S=b}r(bj,S);bj.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};bj.prototype.ba=function(a,b,c){aj(this.S,c.values,this.B);b.Rd(this.S,c.values);return[yd(c.values,[this.S.getName()])]};function cj(){S.call(this,0,1)}r(cj,S);cj.prototype.toString=l("limit(?)");cj.prototype.Nc=function(a){return this.toString().replace("?",a.W.toString())};cj.prototype.ba=function(a,b,c){a[0].entries.splice(c.W);return a};function dj(a){S.call(this,0,1);this.M=a}r(dj,S);m=dj.prototype;m.toString=function(){return"order_by("+ie(this.M)+")"};m.ba=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.M.length;d++){var e=Lg(this.M[d].I);if(null!==b.Ya&&b.Ya.has(e.j())){c=e;break}}b=c;(null===b?a[0]:td(a[0],b)).entries.sort(this.Pf.bind(this))}else a.sort(this.Eg.bind(this));return a};
m.Z=function(a,b){var c,d,e,f=-1;do f++,e=this.M[f].I,c=this.M[f].order,d=a(e),e=b(e);while(d==e&&f+1<this.M.length);a=d<e?-1:d>e?1:0;return 1==c?a:-a};m.Eg=function(a,b){return this.Z(function(b){return b instanceof R?td(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?td(b,a):H(b.entries[b.entries.length-1],a)})};m.Pf=function(a,b){return this.Z(function(b){return H(a,b)},function(a){return H(b,a)})};function ej(a,b){this.Ma=a;this.J=b}function fj(a){return a.J.some(function(a){return a instanceof R},a)?gj(a):hj(a)}function gj(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Lb)return a=td(a.Ma,a.J[0]).entries.map(function(a){var b=new zd(new Wb(-1,{}),1<this.Ma.L.size);Cd(b,this.J[0],H(a,this.J[0].child));return b},a),new G(a,[]);var b=new zd(new Wb(-1,{}),1<a.Ma.L.size);a.J.forEach(function(a){var c=a instanceof R?td(this.Ma,a):H(this.Ma.entries[0],a);Cd(b,a,c)},a);return new G([b],a.Ma.m())}
function hj(a){var b=Array(a.Ma.entries.length),c=1<a.Ma.L.size;a.Ma.entries.forEach(function(a,e){b[e]=new zd(new Wb(a.ua.id(),{}),c);this.J.forEach(function(c){Cd(b[e],c,H(a,c))},this)},a);return new G(b,a.Ma.m())}function ij(a,b){var c=a.map(function(a){return fj(new ej(a,b)).entries[0]});return new G(c,a[0].m())};function jj(a,b){S.call(this,0,1);this.f=a;this.Nb=b}r(jj,S);jj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb)var b=this.Nb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};jj.prototype.ba=function(a){0==a.length?a=[vd()]:1==a.length?(a=a[0],a=[0==this.f.length?a:fj(new ej(a,this.f))]):a=[ij(a,this.f)];return a};function kj(a){return a.f.some(function(a){return a instanceof R})||null!==a.Nb};function lj(){S.call(this,0,1)}r(lj,S);lj.prototype.toString=l("skip(?)");lj.prototype.Nc=function(a){return this.toString().replace("?",a.K.toString())};lj.prototype.ba=function(a,b,c){return[new G(a[0].entries.slice(c.K),a[0].m())]};function mj(){}r(mj,oh);mj.prototype.Wa=function(a,b){if(!n(b.W)&&!n(b.K))return a;var c=nj(a);if(null===c)return a;pg(a,function(a){return a instanceof cj||a instanceof lj}).forEach(function(a){a instanceof cj?c.Oc=!0:c.Pc=!0;qg(a)},this);return c.bb()};function nj(a){a=pg(a,function(a){return a instanceof Ti},function(a){return a instanceof jj&&kj(a)||a instanceof dj||1!=J(a).length||a instanceof Vi});return 0<a.length?a[0]:null};function oj(a){this.c=a}r(oj,oh);oj.prototype.Wa=function(a,b){this.F=a;var c=pj(this,b);if(0==c.length)return this.F;var d,e=0;do d=c[e++],a=qj(this,d,b);while(null===a&&e<c.length);if(null===a)return this.F;b=rj(this,a[0].cb.lc);return null===b?this.F:this.F=sj(this,d,b,a)};function pj(a,b){return pg(a.F,function(a){if(!(a instanceof Vi))return!1;a=ce(b,a.ic);return a instanceof wg&&"or"==a.ob})}function rj(a,b){return pg(a.F,function(a){return a instanceof wi&&a.table.getName()==b})[0]||null}
function qj(a,b,c){b=ce(c,b.ic);var d=b.m();if(1!=d.size)return null;var d=C(d)[0],e=new Li(a.c,d),f=null;return J(b).every(function(a){a=Ni(e,c,[a]);null===a||(null===f?f=[a]:f.push(a));return null!==a})?f:null}function sj(a,b,c,d){var e=new Wi(a.c,c.table),f=new Ui;L(e,f);d.forEach(function(a){a=new Ti(this.c,a.cb,Si(a),!1);L(f,a)},a);qg(b);ug(c,c,e,f);return f.bb()};function tj(a){this.c=a}r(tj,oh);tj.prototype.Wa=function(a,b){b=uj(a,b);if(null===b)return a;a:{var c=b;a=vj(Rd(b,0));if(null!==a){var d;d=b.M;for(var e=null,f=a.table.Ca(),h=0;h<f.length&&null===e;h++)e=wj(f[h],d);d=e;if(null===d){a=c;break a}c=new Ti(this.c,d.cb,new Hi(d.cb),d.Re);d=new Wi(this.c,a.table);L(d,c);qg(b);c=ug(a,a,d,c)}a=c}a==b&&(a=b,c=xj(Rd(b,0)),null!==c&&(d=wj(c.index,b.M),null!==d&&(c.je=d.Re,a=qg(b).parent)));return a.bb()};
function xj(a){a=pg(a,function(a){return a instanceof Ti},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function vj(a){a=pg(a,function(a){return a instanceof wi},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function uj(a,b){return n(b.M)?pg(a,function(a){return a instanceof dj})[0]:null}function wj(a,b){if(a.f.length!=b.length||!b.every(function(b,d){return b.I.getName()==a.f[d].da.getName()}))return null;b=yj(b,a);return b[0]||b[1]?{cb:a,Re:b[1]}:null}
function yj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function zj(a,b,c){this.Ga=a;this.fe=b;this.Tb=c}zj.prototype.fc=function(){this.Tb.forEach(function(a){this.Ga=a.Wa(this.Ga,this.fe)},this);return this.Ga};function Aj(a){S.call(this,0,1);this.S=a}r(Aj,S);Aj.prototype.toString=function(){return"update("+this.S.getName()+")"};Aj.prototype.ba=function(a,b,c){a=a[0].entries.map(function(a){var b=this.S.$a(a.ua.Ia());c.set.forEach(function(a){b.l[a.I.getName()]=a.value},this);return b},this);b.update(this.S,a);return[vd()]};function Bj(a){this.c=a;this.le=[new Fi,new Xi(this.c),new oj(this.c),new tj(this.c),new mj,new xi(this.c)];this.Kd=[new Xi(this.c)]}Bj.prototype.create=function(a,b){var c=a.bb();if(c instanceof bh||c instanceof ah)return Cj(this,a,b);if(c instanceof hh||c instanceof lh||c instanceof mh)return Cj(this,a,b,this.le);if(c instanceof ch||c instanceof dh)return Cj(this,a,b,this.Kd);throw new D(8);};
function Cj(a,b,c,d){a=ng(b.bb(),a.qg.bind(a));null!=d&&(a=(new zj(a,c,d)).fc());return new je(a,b.ca())}
Bj.prototype.qg=function(a){if(a instanceof hh)return new jj(a.f,a.Nb);if(a instanceof kh)return new yi(a.f);if(a instanceof jh)return new Pg(a.f);if(a instanceof ih)return new dj(a.M);if(a instanceof mh)return new lj;if(a instanceof lh)return new cj;if(a instanceof eh)return new Vi(a.N.V());if(a instanceof gh)return new th;if(a instanceof nh)return new Ai(this.c,a.N,a.Pb);if(a instanceof fh)return new wi(this.c,a.table);if(a instanceof ch)return new ui(a.table);if(a instanceof dh)return new Aj(a.table);
if(a instanceof bh)return new bj(this.c,a.table);if(a instanceof ah)return new $i(this.c,a.table);throw new D(514);};function Dj(a){this.ng=new ti;this.zg=new Bj(a)};function Ej(){this.Ye=x()}function Fj(a,b){var c=a.Ye.get(b.getName())||null;null===c&&(c=new Gj,a.Ye.set(b.getName(),c));return c}function Hj(a,b,c,d){c.forEach(function(a){a=Fj(this,a);0==d?(a.fb=null,a.tc=b):3==d?(null===a.Vb&&(a.Vb=B()),a.Vb.add(b),null===a.Va&&(a.Va=B()),a.Va.delete(b)):1==d?(null===a.Va&&(a.Va=B()),a.Va.add(b)):2==d&&(a.fb=b)},a)}
function Ij(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Fj(this,a);var c=null===a.Va||0==a.Va.size;e=0==d?(null===a.Vb||0==a.Vb.size)&&c&&null===a.tc&&null!==a.fb&&a.fb==b:3==d?null===a.tc&&null===a.fb&&null!==a.Va&&a.Va.has(b):1==d?null===a.fb:c&&(null===a.fb||a.fb==b)}},a);return e}function Jj(a,b,c,d){var e=Ij(a,b,c,d);e&&Hj(a,b,c,d);return e}Ej.prototype.releaseLock=function(a,b){b.forEach(function(b){Fj(this,b).releaseLock(a)},this)};
function Kj(a,b){b.forEach(function(a){Fj(this,a).fb=null},a)}function Gj(){this.Vb=this.Va=this.fb=this.tc=null}Gj.prototype.releaseLock=function(a){this.tc==a&&(this.tc=null);this.fb==a&&(this.fb=null);null===this.Va||this.Va.delete(a);null===this.Vb||this.Vb.delete(a)};function Lj(){this.Sb=new Mj;this.Bc=new Ej}function re(a,b){(2>b.getPriority()||2>b.getPriority())&&Kj(a.Bc,b.ca());a.Sb.Ab(b);Nj(a);return b.Db.ha}function Nj(a){for(var b=a.Sb.zb(),c=0;c<b.length;c++){var d=b[c];if(0==d.H()?Oj(a,d,1,3):Oj(a,d,2,0)){a.Sb.remove(d);var e=a;d.exec().then(e.wg.bind(e,d),e.vg.bind(e,d))}}}function Oj(a,b,c,d){var e=!1;Jj(a.Bc,b.V(),b.ca(),c)&&(e=Jj(a.Bc,b.V(),b.ca(),d));return e}Lj.prototype.wg=function(a,b){this.Bc.releaseLock(a.V(),a.ca());a.Db.resolve(b);Nj(this)};
Lj.prototype.vg=function(a,b){this.Bc.releaseLock(a.V(),a.ca());a.Db.reject(b);Nj(this)};function Mj(){this.Sb=[]}Mj.prototype.Ab=function(a){pf(this.Sb,a,function(a,c){var b=a.getPriority()-c.getPriority();return 0==b?a.V()-c.V():b})};Mj.prototype.zb=function(){return this.Sb.slice()};Mj.prototype.remove=function(a){var b=this.Sb;a=xa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Pj(){this.Kc=x()}var Qj;function Rj(){Qj||(Qj=new Pj);return Qj}Pj.prototype.clear=function(){this.Kc.clear()};Pj.prototype.clear=Pj.prototype.clear;Pj.prototype.qb=function(a,b){this.Kc.set(a.toString(),b);return b};Pj.prototype.registerService=Pj.prototype.qb;Pj.prototype.b=function(a){var b=this.Kc.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};Pj.prototype.getService=Pj.prototype.b;Pj.prototype.hd=function(a){return this.Kc.has(a.toString())};
Pj.prototype.isRegistered=Pj.prototype.hd;function Sj(){var a=Rj();return Vb(a.Kc)};function Tj(a,b,c,d){return null!=a?null!=b?Uj(a,b,c,d):Vj(a):Wj()}function Xj(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b}function Yj(a){var b=Rj();a=new ic("ns_"+a);return b.hd(a)?b.b(a):null}function Wj(){var a={};Sj().forEach(function(b){"ns_"==b.substring(0,3)&&(b=b.substring(3),a[b]=Yj(b).b(A).version())});return Xj(a)}function Vj(a){a=Yj(a);var b={};if(null!=a){var c=a.b(lc);a.b(A).oa().forEach(function(a){b[a.getName()]=c.get(Ue(a)).X().ia})}return Xj(b)}
function Uj(a,b,c,d){var e=Yj(a);a=[];if(null!=e){var f=null;try{f=e.b(A).table(b)}catch(h){}null!=f&&(b=e.b(lc),e=e.b(kc),c=b.get(Ue(f)).Sa(void 0,!1,c,d),c.length&&(a=mf(e,c).map(function(a){return a.l})))}return Xj(a)};function Zj(a,b){this.Ld=Nd();this.ge=a;this.kd=b;this.J=ak(this)}function ak(a){if(0<a.ge.f.length)return a.ge.f;var b=[];a.ge.from.forEach(function(a){a.ab().forEach(function(a){b.push(a)})});return b}Zj.prototype.Z=function(a,b){return this.J.every(function(c){return Od(this.Ld,c.H(),"eq")(H(a,c),H(b,c))},this)};
function bk(a,b,c){var d=null===b?[]:b.entries,e=ob(d,c.entries,a.Z.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.kd.splice(f,1),k=ck(h,k,0,a.kd),b.push(k))}e=ob(d,c.entries,a.Z.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.kd.splice(h,0,k.ua.l),k=ck(h,[],1,a.kd),b.push(k));return b}function ck(a,b,c,d){return{addedCount:c,index:a,object:d,removed:b,type:"splice"}};function dk(){this.ec=x()}dk.prototype.xd=function(a,b){var c=la(a.query).toString(),d=this.ec.get(c)||null;null===d&&(d=new ek(a),this.ec.set(c,d));d.xd(b)};dk.prototype.he=function(a,b){a=la(a.query).toString();var c=this.ec.get(a)||null;c.he(b);0<c.Ec.size||this.ec.delete(a)};function qe(a,b){var c=B();b.forEach(function(a){c.add(a.getName())});var d=[];a.ec.forEach(function(a){a=a.yc();a.context.from.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function oe(a,b,c){b=la(null!=b.Uc?b.Uc:b).toString();a=a.ec.get(b)||null;null!==a&&fk(a,c)}function ek(a){this.Bf=a;this.Ec=B();this.tg=[];this.We=null;this.Nf=new Zj(a.query,this.tg)}ek.prototype.xd=function(a){this.Ec.has(a)||this.Ec.add(a)};ek.prototype.he=function(a){return this.Ec.delete(a)};ek.prototype.yc=function(){var a=this.Bf;return{context:a.query,de:Sh(a)}};function fk(a,b){var c=bk(a.Nf,a.We,b);a.We=b;0<c.length&&a.Ec.forEach(function(a){a(c)})};function gk(a,b){var c=a.b(A),d=b||{};b=new kf(c);a.qb(kc,b);b=null;var e=!1;null!=d.storeType?b=d.storeType:(n(Ub)||(Ub=new Tb),b=Ub,b=b.bg?0:b.Qg?4:1);switch(b){case 0:b=new Qe(a,c);break;case 1:b=new Xe(c);break;case 5:b=new Ze(c);break;case 4:b=new gf(a,c,d.webSqlDbSize);break;case 3:b=new De(c,d.firebase);e=!0;break;default:throw new D(300);}a.qb(jc,b);var f=new mg;a.qb(lc,f);return b.Da(d.onUpgrade).then(function(){var b=new Dj(a);a.qb(mc,b);b=new Lj;a.qb(nc,b);b=new dk;a.qb(oc,b);return f.Da(c)}).then(function(){if(e){var b=
new se(a);b.Na.subscribe(b.Zd.bind(b))}d.enableInspector&&(window.top["#lfInspect"]=Tj);return(new fg(a)).Da(c)})};function hk(a){this.c=a;this.g=a.b(A);this.aa=B(this.g.oa());this.Db=w()}function ik(a){var b=a.c.b(lc),c=a.c.b(kc),d={};a.g.oa().forEach(function(a){var e=b.get(Ue(a)).Sa(),e=mf(c,e).map(function(a){return a.l});d[a.getName()]=e});return{name:a.g.name(),version:a.g.version(),tables:d}}m=hk.prototype;m.exec=function(){var a=ik(this),a=new zd(new Wb(-1,a),!0);return v([new G([a],[])])};m.H=l(0);m.ca=g("aa");m.V=function(){return la(this)};m.getPriority=l(0);function jk(a,b){this.c=a;this.g=a.b(A);this.aa=B(this.g.oa());this.Db=w();this.Aa=b;this.Na=a.b(jc);this.U=a.b(kc);this.B=a.b(lc)}m=jk.prototype;
m.exec=function(){if(!(this.Na instanceof Qe||this.Na instanceof Xe||this.Na instanceof gf))throw new D(300);var a;a:{a=this.g.oa();for(var b=0;b<a.length;++b)if(0<this.B.get(Ue(a[b])).X().ia){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.g.name()!=this.Aa.name||this.g.version()!=this.Aa.version)throw new D(111);if(null==this.Aa.tables)throw new D(112);return kk(this)};m.H=l(1);m.ca=g("aa");m.V=function(){return la(this)};m.getPriority=l(0);
function kk(a){var b=new cd(a.c,a.aa),b=a.Na.Fb(a.H(),C(a.aa),b),c;for(c in a.Aa.tables){var d=a.g.table(c),e=a.Aa.tables[c].map(function(a){return d.kb(a)}),f=b.G(c,d.$a,0);a.U.Ub(c,e);var h=a.B.kc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.mb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ka()};function lk(a,b){this.c=a;this.Na=a.b(jc);this.Ha=a.b(nc);this.Ib=a.b(oc);this.aa=B(b);this.Pa=new cd(this.c,this.aa);this.Db=w();this.uc=w();this.ue=w()}m=lk.prototype;m.exec=function(){this.ue.resolve();return this.uc.ha};m.H=l(1);m.ca=g("aa");m.V=function(){return la(this)};m.getPriority=l(2);function mk(a){re(a.Ha,a);return a.ue.ha}
function nk(a,b){b=b.yc();return b.de.bb().exec(a.Pa,b.context).then(function(a){return rd(a[0])},function(a){this.Pa.Jb();var b=new ib(a.name);this.uc.reject(b);throw a;}.bind(a))}m.ka=function(){this.ja=this.Na.Fb(this.H(),C(this.aa),this.Pa);this.ja.ka().then(function(){this.Jc();this.uc.resolve()}.bind(this),function(a){this.Pa.Jb();this.uc.reject(a)}.bind(this));return this.Db.ha};m.Jb=function(){this.Pa.Jb();this.uc.resolve();return this.Db.ha};
m.Jc=function(){var a=qe(this.Ib,this.aa);0!=a.length&&(a=new ne(this.c,a),re(this.Ha,a))};m.X=function(){var a=null;null!=this.ja&&(a=this.ja.X());return null===a?new z(!1,0,0,0,0):a};function V(a){this.c=a;this.Ha=a.b(nc);this.Kb=null;this.Ra=0;0==ok.size&&(ok.set(0,B([1,4])),ok.set(1,B([2])),ok.set(2,B([3,5,6])),ok.set(3,B([2,7])),ok.set(4,B([7])),ok.set(5,B([7])),ok.set(6,B([7])))}q("lf.proc.Transaction",V);var ok=x();function pk(a,b){var c=ok.get(a.Ra)||null;if(null===c||!c.has(b))throw new D(107,a.Ra,b);a.Ra=b}
V.prototype.exec=function(a){pk(this,4);var b=[];try{a.forEach(function(a){a.Za();b.push(a.yc())},this)}catch(c){return pk(this,7),ab(c)}this.Kb=new uh(this.c,b);return re(this.Ha,this.Kb).then(function(a){pk(this,7);return a.map(function(a){return rd(a)})}.bind(this),function(a){pk(this,7);throw a;}.bind(this))};V.prototype.exec=V.prototype.exec;V.prototype.zf=function(a){pk(this,1);this.Kb=new lk(this.c,a);return mk(this.Kb).then(function(){pk(this,2)}.bind(this))};V.prototype.begin=V.prototype.zf;
V.prototype.yf=function(a){pk(this,3);try{a.Za()}catch(b){return pk(this,7),ab(b)}return nk(this.Kb,a).then(function(a){pk(this,2);return a}.bind(this),function(a){pk(this,7);throw a;}.bind(this))};V.prototype.attach=V.prototype.yf;V.prototype.ka=function(){pk(this,5);return this.Kb.ka().then(function(){pk(this,7)}.bind(this))};V.prototype.commit=V.prototype.ka;V.prototype.Jb=function(){pk(this,6);return this.Kb.Jb().then(function(){pk(this,7)}.bind(this))};V.prototype.rollback=V.prototype.Jb;
V.prototype.X=function(){if(7!=this.Ra)throw new D(105);return this.Kb.X()};V.prototype.stats=V.prototype.X;function W(a){this.c=a;this.g=a.b(A);this.ed=!1}q("lf.proc.Database",W);W.prototype.Da=function(a){this.c.qb(A,this.g);return gk(this.c,a).then(function(){this.ed=!0;this.Ha=this.c.b(nc);return this}.bind(this))};W.prototype.init=W.prototype.Da;W.prototype.yb=g("g");W.prototype.getSchema=W.prototype.yb;function qk(a){if(!a.ed)throw new D(2);}W.prototype.select=function(a){qk(this);return new U(this.c,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.Ab=function(){qk(this);return new Uh(this.c)};W.prototype.insert=W.prototype.Ab;W.prototype.Rd=function(){qk(this);return new Uh(this.c,!0)};W.prototype.insertOrReplace=W.prototype.Rd;W.prototype.update=function(a){qk(this);return new di(this.c,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){qk(this);return new Th(this.c)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){qk(this);this.c.b(oc).xd(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){qk(this);this.c.b(oc).he(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Jf=function(){qk(this);return new V(this.c)};W.prototype.createTransaction=W.prototype.Jf;W.prototype.close=function(){try{this.c.b(jc).close()}catch(a){}this.c.clear();this.ed=!1};W.prototype.close=W.prototype.close;
W.prototype.Tf=function(){qk(this);var a=new hk(this.c);return re(this.Ha,a).then(function(a){return rd(a[0])[0]})};W.prototype["export"]=W.prototype.Tf;W.prototype.import=function(a){qk(this);a=new jk(this.c,a);return re(this.Ha,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.S=a;this.w=b;this.Se=c;this.Qe=d;this.rf=e;this.Ja=f||null}q("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("w");m.j=function(){return Bd(this.S)+"."+this.w};m.toString=function(){return this.j()};m.G=g("S");m.H=g("rf");X.prototype.getType=X.prototype.H;X.prototype.Ca=function(){null==this.sa&&(this.sa=[],this.G().Ca().forEach(function(a){-1!=a.f.map(function(a){return a.da.getName()}).indexOf(this.w)&&this.sa.push(a)},this));return this.sa};
X.prototype.Ba=function(){if(!n(this.fa)){var a=this.Ca().filter(function(a){return 1!=a.f.length?!1:a.f[0].da.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};X.prototype.gc=g("Qe");X.prototype.isNullable=X.prototype.gc;X.prototype.Ac=g("Se");X.prototype.Oa=function(a){return Fg(this,a,"eq")};X.prototype.eq=X.prototype.Oa;X.prototype.Ze=function(a){return Fg(this,a,"neq")};X.prototype.neq=X.prototype.Ze;X.prototype.og=function(a){return Fg(this,a,"lt")};
X.prototype.lt=X.prototype.og;X.prototype.pg=function(a){return Fg(this,a,"lte")};X.prototype.lte=X.prototype.pg;X.prototype.Xf=function(a){return Fg(this,a,"gt")};X.prototype.gt=X.prototype.Xf;X.prototype.Yf=function(a){return Fg(this,a,"gte")};X.prototype.gte=X.prototype.Yf;X.prototype.match=function(a){return Fg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Af=function(a,b){return Fg(this,[a,b],"between")};X.prototype.between=X.prototype.Af;
X.prototype.Zf=function(a){return Fg(this,a,"in")};X.prototype["in"]=X.prototype.Zf;X.prototype.jg=function(){return this.Oa(null)};X.prototype.isNull=X.prototype.jg;X.prototype.ig=function(){return this.Ze(null)};X.prototype.isNotNull=X.prototype.ig;X.prototype.pc=function(a){return new X(this.S,this.w,this.Se,this.Qe,this.rf,a)};X.prototype.as=X.prototype.pc;function rk(a){this.g=a;this.Dd=new Kc;this.ie=new Kc;this.af=new Kc;this.De=x();this.h=new Kc;this.ze=new Kc;this.ff=new Kc;this.Ce=new Kc;sk(this)}function sk(a){a.g.oa().forEach(function(a){var b=a.getName();a.xb().Pd.forEach(function(c){this.af.set(b,this.g.table(c.Ua));this.h.set(c.Ua,a);0==c.action?(this.ie.set(c.Ua,c),this.ff.set(c.Ua,a)):(this.Dd.set(c.Ua,c),this.ze.set(c.Ua,a));this.De.set(a.getName()+"."+c.ub,c.Ua);this.Ce.set(c.Ua+"."+c.Gc,a.getName())},this)},a)}
function Tc(a,b,c){if(null!=c)return 1==c?a.Dd.get(b):a.ie.get(b);c=a.Dd.get(b);a=a.ie.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Ah(a,b){a=b.get(a);return null===a?[]:a}function Ch(a,b){var c=B();b.forEach(function(a){(a=this.De.get(a))&&c.add(a)},a);return C(c).map(function(a){return this.g.table(a)},a)}function yh(a,b,c){return null!=c?0==c?Ah(b,a.ff):Ah(b,a.ze):Ah(b,a.h)}
function Dh(a,b){var c=B();b.forEach(function(a){(a=this.Ce.get(a))&&a.forEach(function(a){c.add(a)})},a);return C(c).map(function(a){return this.g.table(a)},a)};function tk(a,b,c){this.od=a;this.sg=b;this.Pd=c}q("lf.schema.Constraint",tk);tk.prototype.Wf=g("od");tk.prototype.getPrimaryKey=tk.prototype.Wf;tk.prototype.Vf=g("Pd");tk.prototype.getForeignKeys=tk.prototype.Vf;function uk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new D(540,c);this.Be=b;this.ub=a.local;this.Ua=d[0];this.Gc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){vk(a);this.Ld=Nd();this.w=a;this.J=x();this.ud=B();this.mc=B();this.jd=B();this.Ea=null;this.sa=x();this.nd=!1;this.wb=[]}q("lf.schema.TableBuilder",Y);function wk(a){this.name=a.name;this.order=a.order;this.autoIncrement=a.autoIncrement}var xk=B([0,6]);function vk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function yk(a,b){if(b==a.w)throw new D(546,b);if(a.J.has(b)||a.sa.has(b)||a.mc.has(b))throw new D(503,a.w+"."+b);}
function zk(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function Ak(a){if(null!==a.Ea){var b=a.sa.get(a.Ea).map(function(a){return a.name}),c=0;if(a.wb.some(function(a,e){c=e;return-1!=b.indexOf(a.ub)},a))throw new D(543,a.wb[c].name);}}
function Bk(a){if(null!==a.Ea){var b=function(a){return a.name},c=JSON.stringify(a.sa.get(a.Ea).map(b));a.sa.forEach(function(a,e){if(e!=this.Ea&&(a=a.map(b),JSON.stringify(a)==c))throw new D(544,this.w+"."+e);},a)}}function Ck(a){null===a.Ea||a.sa.get(a.Ea).forEach(function(a){if(this.jd.has(a.name))throw new D(545,this.w+"."+a.name);},a)}Y.prototype.tf=function(a,b){vk(a);yk(this,a);this.J.set(a,b);xk.has(b)&&this.we([a]);return this};Y.prototype.addColumn=Y.prototype.tf;
Y.prototype.vf=function(a,b){var c=this.w;this.Ea="pk"+(c[0].toUpperCase()+c.substring(1));vk(this.Ea);yk(this,this.Ea);a=Dk(this,a,!0,void 0,b);zk(this,a);1==a.length&&this.ud.add(a[0].name);this.mc.add(this.Ea);this.sa.set(this.Ea,a);return this};Y.prototype.addPrimaryKey=Y.prototype.vf;
Y.prototype.uf=function(a,b){vk(a);yk(this,a);b=new uk(b,this.w,a);n(b.action)||(b.action=0);n(b.timing)||(b.timing=0);if(1==b.action&&1==b.timing)throw new D(506);if(!this.J.has(b.ub))throw new D(540,a);this.wb.push(b);this.ve(a,[b.ub],this.ud.has(b.ub));return this};Y.prototype.addForeignKey=Y.prototype.uf;Y.prototype.wf=function(a,b){vk(a);yk(this,a);b=Dk(this,b,!0);1==b.length&&(this.ud.add(b[0].name),Ek(this,b[0].name));this.sa.set(a,b);this.mc.add(a);return this};Y.prototype.addUnique=Y.prototype.wf;
function Ek(a,b){a.wb.forEach(function(a){a.ub==b&&this.mc.add(a.name.split(".")[1])},a)}Y.prototype.we=function(a){Dk(this,a,!1).forEach(function(a){this.jd.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.we;Y.prototype.ve=function(a,b,c,d){vk(a);yk(this,a);b=Dk(this,b,!0,d);c&&this.mc.add(a);this.sa.set(a,b);return this};Y.prototype.addIndex=Y.prototype.ve;Y.prototype.Cb=ca("nd");Y.prototype.persistentIndex=Y.prototype.Cb;
Y.prototype.yb=function(){Ak(this);Bk(this);Ck(this);return new (Fk(this))};Y.prototype.getSchema=Y.prototype.yb;function Dk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new wk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new wk(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new D(508,this.w,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new D(509,this.w,a.name);}},a);return f}
function Fk(a){function b(){function b(b){return a.sa.get(b).map(function(a){return{da:this[a.name],order:a.order,autoIncrement:a.autoIncrement}},this)}var d=Vb(a.J).map(function(b){this[b]=new X(this,b,a.ud.has(b),a.jd.has(b),a.J.get(b));return this[b]},this),e=Vb(a.sa).map(function(c){return new Hg(a.w,c,a.mc.has(c),b.call(this,c))},this);Q.call(this,a.w,d,e,a.nd);var f=null===a.Ea?null:new Hg(a.w,a.Ea,!0,b.call(this,a.Ea)),h=d.filter(function(b){return!a.jd.has(b.getName())});this.Ff=new tk(f,
h,a.wb);this.jf=Gk(a,d,e)}r(b,Q);b.prototype.kb=function(a){return new this.jf(Xb++,a)};b.prototype.createRow=b.prototype.kb;b.prototype.$a=function(a){var b={};this.ab().forEach(function(c){var d=c.getName();c=c.H();var e=a.value[d];if(0==c)if(c=e,null!=c&&""!=c){0!=c.length%2&&(c="0"+c);for(var e=new ArrayBuffer(c.length/2),k=new Uint8Array(e),p=0,K=0;p<c.length;p+=2)k[K++]=parseInt(c.substr(p,2),16);c=e}else c=null;else c=2==c?null!=e?new Date(e):null:e;b[d]=c},this);return new this.jf(a.id,b)};
b.prototype.deserializeRow=b.prototype.$a;b.prototype.xb=g("Ff");b.prototype.getConstraint=b.prototype.xb;return b}
function Gk(a,b,c){function d(a,d){this.J=b;this.sa=c;Wb.call(this,a,d)}r(d,Wb);d.prototype.Fe=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.gc()?null:Jc[b.H()]});return a};d.prototype.qf=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.H();var d=this.l[c];a[c]=0==b?null!=d?$b(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Ld.Te.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.da)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.j();a=1==a.f.length?e(a.f[0].da):f(a.f);h[b]=a});d.prototype.mb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.l):null};return d};function Hk(a,b){this.g=new Z(a,b);this.sb=x();this.vc=!1;this.i=null;this.Wc=!1}q("lf.schema.Builder",Hk);function Ik(a,b){b.wb.forEach(function(a){var c=a.Ua;if(!this.sb.has(c))throw new D(536,a.name);var c=this.sb.get(c).yb(),e=a.Gc;if(!c.hasOwnProperty(e))throw new D(537,a.name);if(b.yb()[a.ub].H()!=c[e].H())throw new D(538,a.name);if(!c[e].Ac())throw new D(539,a.name);},a)}
Hk.prototype.Ef=function(a){a.wb.forEach(function(a){this.sb.get(a.Ua).wb.forEach(function(b){if(b.ub==a.Gc)throw new D(534,a.name);},this)},this)};function Jk(a){a.vc||(a.sb.forEach(function(a){Ik(this,a);a=a.yb();this.g.L.set(a.getName(),a)},a),y(a.sb).forEach(a.Ef,a),Kk(a),a.sb.clear(),a.vc=!0)}function Lk(a,b,c){b.se||(b.se=!0,b.$d=!0,b.Ge.forEach(function(a){a=c.get(a);if(!a.se)Lk(this,a,c);else if(a.$d&&b!=a)throw new D(533);},a));b.$d=!1}
function Kk(a){var b=x();a.g.L.forEach(function(a,d){b.set(d,new Mk(d))},a);a.sb.forEach(function(a,d){a.wb.forEach(function(a){b.get(a.Ua).Ge.add(d)})});y(b).forEach(function(a){Lk(this,a,b)},a)}function Mk(a){this.$d=this.se=!1;this.Ge=B();this.lc=a}Hk.prototype.yb=function(){this.vc||Jk(this);return this.g};Hk.prototype.getSchema=Hk.prototype.yb;Hk.prototype.Ke=function(){var a=new ic("ns_"+this.g.name()),b=Rj(),c;b.hd(a)?c=b.b(a):(c=new Pj,b.qb(a,c));return c};Hk.prototype.getGlobal=Hk.prototype.Ke;
Hk.prototype.connect=function(a){if(this.Wc||null!==this.i&&this.i.ed)throw new D(113);this.Wc=!0;if(null===this.i){var b=this.Ke();b.hd(A)||b.qb(A,this.yb());this.i=new W(b)}return this.i.Da(a).then(function(a){this.Wc=!1;return a}.bind(this),function(a){this.Wc=!1;throw a;}.bind(this))};Hk.prototype.connect=Hk.prototype.connect;Hk.prototype.If=function(a){if(this.sb.has(a))throw new D(503,a);if(this.vc)throw new D(535);this.sb.set(a,new Y(a));return this.sb.get(a)};Hk.prototype.createTable=Hk.prototype.If;
Hk.prototype.me=function(a){if(this.vc)throw new D(535);this.g.me(a);return this};Hk.prototype.setPragma=Hk.prototype.me;function Z(a,b){this.w=a;this.Yb=b;this.L=x();this.ee={Of:!1}}q("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("w");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Yb");Z.prototype.version=Z.prototype.version;Z.prototype.oa=function(){return y(this.L)};Z.prototype.tables=Z.prototype.oa;Z.prototype.table=function(a){if(!this.L.has(a))throw new D(101,a);return this.L.get(a)};
Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Pe||(this.Pe=new rk(this));return this.Pe};Z.prototype.Ag=g("ee");Z.prototype.pragma=Z.prototype.Ag;Z.prototype.me=ca("ee");q("lf.schema.create",function(a,b){return new Hk(a,b)});u.prototype.catch=u.prototype.pe;u.prototype["catch"]=u.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))();
//# sourceMappingURL=lovefield.es6.js.map
